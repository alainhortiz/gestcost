{% extends 'base.html.twig' %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('easyadmin/tema/select2/select2-bootstrap.min.css') }}"/>
    <link rel="stylesheet" href="{{ asset('easyadmin/plugins/bootstrap-toastr/toastr.min.css') }}"/>
{% endblock %}

{% block info %}
    <div class="row counters">
        <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12" id="linkVenta" style="cursor: pointer;margin-top: 20px">
            {% if app.session.get('totalEstimadoVenta') == 0 %}
                <div class="dashboard-stat grey">
            {% elseif app.session.get('aprobadoPlanVentas') %}
                <div class="dashboard-stat  green-haze">
            {% else  %}
                <div class="dashboard-stat  {{ app.session.get('aprobarEstimadoVenta') ? 'red-flamingo' : 'yellow-crusta' }}">
            {% endif %}
                <div class="visual">
                    <i class="icon icon-basket-loaded"></i>
                </div>
                <div class="details">
                    <div class="number" data-toggle="counter-up" id="nameVentas">
                        {{ app.session.get('totalEstimadoVenta')|number_format(0, '.', ',') }}
                    </div>
                    <div class="desc">
                        <strong>VENTAS</strong>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12" id="linkOtroIngreso" style="cursor: pointer;margin-top: 20px">
            {% if app.session.get('totalEstimadoOtroIngreso') == 0 %}
               <div class="dashboard-stat grey">
            {% elseif app.session.get('aprobadoOtroIngreso') %}
               <div class="dashboard-stat  green-haze">
            {% else  %}
               <div class="dashboard-stat  {{ app.session.get('aprobarEstimadoOtroIngreso') ? 'red-flamingo' : 'yellow-crusta' }}">
            {% endif %}
                <div class="visual">
                    <i class="fa fa-recycle"></i>
                </div>
                <div class="details">
                    <div class="number" data-toggle="counter-up" id="nameOtroIngreso">
                        {{ app.session.get('totalEstimadoOtroIngreso')|number_format(0, '.', ',') }}
                    </div>
                    <div class="desc">
                        <strong>OTROS INGRESOS</strong>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12" id="linkSalario" style="cursor: pointer;margin-top: 20px">
            {% if app.session.get('totalEstimadoRecursosHumanos') == 0 %}
               <div class="dashboard-stat grey">
            {% elseif app.session.get('aprobadoPlanRecursosHumanos') %}
               <div class="dashboard-stat  green-haze">
            {% else  %}
               <div class="dashboard-stat  {{ app.session.get('aprobarEstimadoRecursosHumanos') ? 'red-flamingo' : 'yellow-crusta' }}">
            {% endif %}
                <div class="visual">
                    <i class="fa fa-money"></i>
                </div>
                <div class="details">
                    <div class="number" data-toggle="counter-up" id="nameRecursosHumanos">
                        {{ app.session.get('totalEstimadoRecursosHumanos')|number_format(0, '.', ',') }}
                    </div>
                    <div class="desc">
                        <strong>SALARIO</strong>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12" id="linkCombustible" style="cursor: pointer;margin-top: 20px">
            {% if app.session.get('totalEstimadoCombustible') == 0 %}
               <div class="dashboard-stat grey">
            {% elseif app.session.get('aprobadoCombustible') %}
               <div class="dashboard-stat  green-haze">
            {% else  %}
               <div class="dashboard-stat  {{ app.session.get('aprobarEstimadoCombustible') ? 'red-flamingo' : 'yellow-crusta' }}">
            {% endif %}
                <div class="visual">
                    <i class="fa fa-automobile"></i>
                </div>
                <div class="details">
                    <div class="number" id="nameCombustible">
                        {{ app.session.get('totalEstimadoCombustible')|number_format(0, '.', ',') }} LTS
                    </div>
                    <div class="desc">
                        <strong>COMBUSTIBLE</strong>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12" id="linkLubricante" style="cursor: pointer;margin-top: 20px">
            {% if app.session.get('totalEstimadoLubricante') == 0 %}
               <div class="dashboard-stat grey">
            {% elseif app.session.get('aprobadoLubricante') %}
               <div class="dashboard-stat  green-haze">
            {% else  %}
               <div class="dashboard-stat  {{ app.session.get('aprobarEstimadoLubricante') ? 'red-flamingo' : 'yellow-crusta' }}">
            {% endif %}
                <div class="visual">
                    <i class="fa fa-tint"></i>
                </div>
                <div class="details">
                    <div class="number" id="nameLubricante">
                        {{ app.session.get('totalEstimadoLubricante')|number_format(0, '.', ',') }} LTS
                    </div>
                    <div class="desc">
                        <strong>ACEITE</strong>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12" id="linkEnergia" style="cursor: pointer;margin-top: 20px">
            {% if app.session.get('totalEstimadoEnergia') == 0 %}
               <div class="dashboard-stat grey">
            {% elseif app.session.get('aprobadoPlanEnergia') %}
               <div class="dashboard-stat  green-haze">
            {% else  %}
               <div class="dashboard-stat  {{ app.session.get('aprobarEstimadoEnergia') ? 'red-flamingo' : 'yellow-crusta' }}">
            {% endif %}
                <div class="visual">
                    <i class="icon icon-bulb"></i>
                </div>
                <div class="details">
                    <div class="number" data-toggle="counter-up" id="nameEnergia">
                        {{ app.session.get('totalEstimadoEnergia')|number_format(0, '.', ',') }}
                    </div>
                    <div class="desc">
                        <strong>ENERGÍA</strong>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12" id="linkOtroGastos" style="cursor: pointer;margin-top: 20px">
            {% if app.session.get('totalEstimadoOtrosGastos') == 0 %}
               <div class="dashboard-stat grey">
            {% elseif app.session.get('aprobadoPlanOtrosGastos') %}
               <div class="dashboard-stat  green-haze">
            {% else  %}
               <div class="dashboard-stat  {{ app.session.get('aprobarEstimadoOtrosGastos') ? 'red-flamingo' : 'yellow-crusta' }}">
            {% endif %}
                <div class="visual">
                    <i class="fa fa-archive"></i>
                </div>
                <div class="details">
                    <div class="number" data-toggle="counter-up" id="nameOtrosGastos">
                        {{ app.session.get('totalEstimadoOtrosGastos')|number_format(0, '.', ',') }}
                    </div>
                    <div class="desc">
                        <strong>OTROS GASTOS</strong>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12" id="linkMateriasPrimas" style="cursor: pointer;margin-top: 20px">
            {% if app.session.get('totalEstimadoMateriaPrima') == 0 %}
               <div class="dashboard-stat grey">
            {% elseif app.session.get('aprobadoMateriaPrima') %}
               <div class="dashboard-stat  green-haze">
            {% else  %}
               <div class="dashboard-stat  {{ app.session.get('aprobarEstimadoMateriaPrima') ? 'red-flamingo' : 'yellow-crusta' }}">
            {% endif %}
                <div class="visual">
                    <i class="fa fa-slack"></i>
                </div>
                <div class="details">
                    <div class="number" data-toggle="counter-up" id="nameMateriasPrimas">
                        {{ app.session.get('totalEstimadoMateriaPrima')|number_format(0, '.', ',') }}
                    </div>
                    <div class="desc">
                        <strong>MATERIAS PRIMAS</strong>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12" id="linkDepreciacion" style="cursor: pointer;margin-top: 20px">
            {% if app.session.get('totalEstimadoDepreciacion') == 0 %}
               <div class="dashboard-stat grey">
            {% elseif app.session.get('aprobadoDepreciacion') %}
               <div class="dashboard-stat  green-haze">
            {% else  %}
               <div class="dashboard-stat  {{ app.session.get('aprobarEstimadoDepreciacion') ? 'red-flamingo' : 'yellow-crusta' }}">
            {% endif %}
                <div class="visual">
                    <i class="fa fa-recycle"></i>
                </div>
                <div class="details">
                    <div class="number" data-toggle="counter-up" id="nameDepreciacion">
                        {{ app.session.get('totalEstimadoDepreciacion')|number_format(0, '.', ',') }}
                    </div>
                    <div class="desc">
                        <strong>DEPRECIACIÓN</strong>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12" id="linkBonificacion" style="cursor: pointer;margin-top: 20px">
            {% if app.session.get('totalEstimadoBonificacion') == 0 %}
               <div class="dashboard-stat grey">
            {% elseif app.session.get('aprobadoBonificacion') %}
               <div class="dashboard-stat  green-haze">
            {% else  %}
               <div class="dashboard-stat  {{ app.session.get('aprobarEstimadoBonificacion') ? 'red-flamingo' : 'yellow-crusta' }}">
            {% endif %}
                <div class="visual">
                    <i class="fa fa-recycle"></i>
                </div>
                <div class="details">
                    <div class="number" data-toggle="counter-up" id="nameBonificacion">
                        {{ app.session.get('totalEstimadoBonificacion')|number_format(0, '.', ',') }}
                    </div>
                    <div class="desc">
                        <strong>BONIFICACIÓN</strong>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12" id="linkComedor" style="cursor: pointer;margin-top: 20px">
            {% if app.session.get('totalEstimadoComedor') == 0 %}
               <div class="dashboard-stat grey">
            {% elseif app.session.get('aprobadoComedor') %}
               <div class="dashboard-stat  green-haze">
            {% else  %}
               <div class="dashboard-stat  {{ app.session.get('aprobarEstimadoComedor') ? 'red-flamingo' : 'yellow-crusta' }}">
            {% endif %}
                <div class="visual">
                    <i class="fa fa-recycle"></i>
                </div>
                <div class="details">
                    <div class="number" data-toggle="counter-up" id="nameComedor">
                        {{ app.session.get('totalEstimadoComedor')|number_format(0, '.', ',') }}
                    </div>
                    <div class="desc">
                        <strong>GASTOS DE COMEDOR</strong>
                    </div>
                </div>
            </div>
        </div>
        {#<div class="col-lg-2 col-md-3 col-sm-6 col-xs-12" id="linkAmortizacion" style="cursor: pointer;margin-top: 20px">
            {% if app.session.get('totalEstimadoAmortizacion') == 0 %}
               <div class="dashboard-stat grey">
            {% elseif app.session.get('aprobadoAmortizacion') %}
               <div class="dashboard-stat  green-haze">
            {% else  %}
               <div class="dashboard-stat  {{ app.session.get('aprobarEstimadoAmortizacion') ? 'red-flamingo' : 'yellow-crusta' }}">
            {% endif %}
                <div class="visual">
                    <i class="fa fa-bank"></i>
                </div>
                <div class="details">
                    <div class="number" data-toggle="counter-up" id="nameAmortizacion">
                        {{ app.session.get('totalEstimadoAmortizacion')|number_format(0, '.', ',') }}
                    </div>
                    <div class="desc">
                        <strong>AMORTIZACIÓN</strong>
                    </div>
                </div>
            </div>
        </div>#}
        <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12" id="linkGastoMaterial" style="cursor: pointer;margin-top: 20px">
            {% if app.session.get('totalEstimadoCombustible') == 0 and app.session.get('totalEstimadoEnergia') == 0 and app.session.get('totalEstimadoMateriaPrima') == 0 %}
               <div class="dashboard-stat grey">
            {% elseif app.session.get('aprobarEstimadoCombustible') == true and app.session.get('aprobarEstimadoEnergia') == true and app.session.get('aprobarEstimadoMateriaPrima') == true %}
                   <div class="dashboard-stat  green-haze">
            {% else %}
                   <div class="dashboard-stat  red-flamingo">
            {% endif %}

                <div class="visual">
                    <i class="fa fa-bank"></i>
                </div>
                <div class="details">
                    <div class="number" data-toggle="counter-up" id="nameGastoMaterial">
                        {{ (app.session.get('totalEstimadoCombustible') + app.session.get('totalEstimadoEnergia') + app.session.get('totalEstimadoMateriaPrima'))|number_format(0, '.', ',') }}
                    </div>
                    <div class="desc">
                        <strong>GASTO MATERIAL</strong>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block body %}
    <div class="preload hidden">
        <div class="logo"></div>
        <div class="loader-frame">
            <div class="loader1" id="loader1"></div>
            <div class="loader2" id="loader2"></div>
        </div>
    </div>

    <div class="container-fluid">
        <div class="portlet light estilosForm">
            <div class="portlet-title">
                <div class="caption font-green">
                    <i class="fa fa-folder-open font-green"></i>
                    <span class="caption-subject bold uppercase">PLAN ANUAL DE INDICADORES PRINCIPALES</span>
                    <span id="nameSeccionHelp" class="caption-helper bold uppercase"
                          id="year">{{ app.session.get('yearActivo') }}</span>
                </div>
                <div class="tools">
                    <a href="#" class="reload" id="btnAtrasPlan" data-placement="top"
                       data-original-title="Reiniciar">
                    </a>
                </div>
            </div>
            <div class="portlet-body">
                <ul class="nav nav-tabs nav-pills">
                    <li class="active">
                        <a href="#inicioPlan" data-toggle="tab">
                            INICIO DEL PLAN </a>
                    </li>
                    {% if app.session.get('idPlanEstimado') != 0 %}
                        {% if app.session.get('aprobarEstimadoVenta') == false %}
                            <li>
                                <a href="#venta" data-toggle="tab">
                                    PRESUPUESTO VENTAS </a>
                            </li>
                        {% endif %}
                        {% if app.session.get('aprobarEstimadoOtroIngreso') == false %}
                            <li>
                                <a href="#otroIngreso" data-toggle="tab">
                                    PRESUPUESTO OTROS INGRESOS </a>
                            </li>
                        {% endif %}
                        {% if app.session.get('aprobarEstimadoRecursosHumanos') == false %}
                            <li>
                                <a href="#salario" data-toggle="tab">
                                    PRESUPUESTO FONDO SALARIO</a>
                            </li>
                        {% endif %}
                        {% if app.session.get('aprobarEstimadoCombustible') == false %}
                            <li>
                                <a href="#combustible" data-toggle="tab">
                                    LITROS COMBUSTIBLE</a>
                            </li>
                        {% endif %}
                        {% if app.session.get('aprobarEstimadoLubricante') == false %}
                            <li>
                                <a href="#lubricante" data-toggle="tab">
                                    LITROS ACEITE</a>
                            </li>
                        {% endif %}
                        {% if app.session.get('aprobarEstimadoEnergia') == false %}
                            <li>
                                <a href="#energia" data-toggle="tab">
                                    PRESUPUESTO ENERGÍA </a>
                            </li>
                        {% endif %}
                        {% if app.session.get('aprobarEstimadoOtrosGastos') == false %}
                            <li>
                                <a href="#otroGasto" data-toggle="tab">
                                    PRESUPUESTO OTROS GASTOS </a>
                            </li>
                        {% endif %}
                        {% if app.session.get('aprobarEstimadoMateriaPrima') == false %}
                            <li>
                                <a href="#materiaPrima" data-toggle="tab">
                                    PRESUPUESTO MATERIAS PRIMAS </a>
                            </li>
                        {% endif %}
                        {% if app.session.get('aprobarEstimadoDepreciacion') == false %}
                            <li>
                                <a href="#depreciacion" data-toggle="tab">
                                    PRESUPUESTO DEPRECIACIÓN </a>
                            </li>
                        {% endif %}
                        {% if app.session.get('aprobarEstimadoBonificacion') == false %}
                            <li>
                                <a href="#bonificacion" data-toggle="tab">
                                    PRESUPUESTO BONIFICACIÓN </a>
                            </li>
                        {% endif %}
                        {% if app.session.get('aprobarEstimadoComedor') == false %}
                            <li>
                                <a href="#comedor" data-toggle="tab">
                                    PRESUPUESTO GASTOS DE COMEDOR </a>
                            </li>
                        {% endif %}
                    {% endif %}
                </ul>
                <div class="tab-content">
                    <div class="tab-pane fade active in" id="inicioPlan">
                        <form role="form" id="formAddInicio">
                            <div class="form-body">
                                <div class="row">
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <div class="portlet">
                                            <div class="col-lg-12 col-md-12 col-sm-12" style="margin-top: 80px">
                                                <div class="form-group form-md-line-input input-icon right">
                                                    <input type="number" min="2020" value="{{ app.session.get('yearActivo') }}" class="form-control"
                                                           id="yearPlan"
                                                           name="yearPlan">
                                                    <label for="yearPlan">AÑO</label>
                                                </div>
                                            </div>
                                            <div class="col-lg-4 col-md-12 col-sm-12" style="margin-top: 40px">
                                                <div class="form-actions noborder">
                                                    <button type="button"
                                                            class="btn btn-secondary IniciarPlan" {{ app.session.get('idPlanEstimado') != 0 ? 'disabled' }}>
                                                        Iniciar
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="col-lg-4 col-md-12 col-sm-12" style="margin-top: 40px">
                                                <div class="form-actions noborder">
                                                {% if (app.session.get('aprobadoPlanVentas') and app.session.get('aprobadoOtroIngreso') and app.session.get('aprobadoPlanRecursosHumanos') and app.session.get('aprobadoCombustible') and app.session.get('aprobadoLubricante') and app.session.get('aprobadoPlanEnergia') and app.session.get('aprobadoPlanOtrosGastos') and app.session.get('aprobadoPlanOtrosGastos') and app.session.get('aprobadoMateriaPrima') and app.session.get('aprobadoDepreciacion')) %}
                                                    <button type="button" class="btn btn-secondary AprobarPlan">
                                                        Aprobar
                                                    </button>
                                                 {% else %}
                                                 <button type="button" class="btn btn-secondary AprobarPlan" disabled>
                                                        Aprobar
                                                    </button>
                                                {% endif %}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-9 col-md-9 col-sm-9" style="overflow-x:auto;margin-top: 20px">
                                        <div class="portlet chart" style="margin-top: 20px"
                                             id="graficoPlanYear">
                                                <span id="nameSeccion" class="caption-subject bold uppercase"
                                                      style="color: #009490"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                    {% if app.session.get('idPlanEstimado') != 0 %}
                        {% if app.session.get('aprobarEstimadoVenta') == false %}
                            <div class="tab-pane fade" id="venta">
                                <form role="form" id="formAddTotalEstimadoVenta">
                                    <div class="form-body">
                                        <div class="row">
                                            <div class="col-lg-3 col-md-3 col-sm-3">
                                                <div class="portlet">
                                                    <div class="col-lg-12 col-md-12 col-sm-12" style="margin-top: 80px">
                                                        <div class="form-group form-md-line-input input-icon right">
                                                            <i style="color: #111111">CUP</i>
                                                            <input type="text" class="form-control" onkeypress="return filterFloat(event,this);"
                                                                   id="totalVentaContable"
                                                                   name="totalVentaContable">
                                                            <label for="totalVentaContable">TOTAL DE PRESUPUESTO</label>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4 col-md-12 col-sm-12" style="margin-top: 40px">
                                                        <div class="form-actions noborder">
                                                            <button type="button"
                                                                    class="btn btn-secondary AsignarTotalVenta" {{ app.session.get('totalEstimadoVenta') != 0 ? 'disabled' }}>
                                                                Asignar
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4 col-md-12 col-sm-12" style="margin-top: 40px">
                                                        <div class="form-actions noborder">
                                                            <button type="button"
                                                                    class="btn btn-secondary ModificarTotalVenta"
                                                                    disabled>
                                                                Modificar
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4 col-md-12 col-sm-12" style="margin-top: 40px">
                                                        <div class="form-actions noborder">
                                                            <button type="button"
                                                                    class="btn btn-secondary AprobarTotalVenta" {{ app.session.get('totalEstimadoVenta') == 0 ? 'disabled' }}>
                                                                Aprobar
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-9 col-md-9 col-sm-9"
                                                 style="overflow-x:auto;margin-top: 20px">
                                                <div class="portlet chart" style="margin-top: 20px"
                                                     id="graficoVentasYear">
                                                <span id="nameSeccion" class="caption-subject bold uppercase"
                                                      style="color: #009490"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        {% endif %}
                        {% if app.session.get('aprobarEstimadoOtroIngreso') == false %}
                             <div class="tab-pane fade" id="otroIngreso">
                                <form role="form" id="formAddTotalOtroIngreso">
                                    <div class="form-body">
                                        <div class="row">
                                            <div class="col-lg-3 col-md-3 col-sm-3">
                                                <div class="portlet">
                                                    <div class="col-lg-12 col-md-12 col-sm-12" style="margin-top: 80px">
                                                        <div class="form-group form-md-line-input input-icon right">
                                                            <i style="color: #111111"></i>
                                                            <input type="text" class="form-control" onkeypress="return filterFloat(event,this);"
                                                                   id="totalOtroIngreso"
                                                                   name="totalOtroIngreso">
                                                            <label for="totalOtroIngreso">TOTAL DE PRESUPUESTO</label>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4 col-md-12 col-sm-12" style="margin-top: 40px">
                                                        <div class="form-actions noborder">
                                                            <button type="button"
                                                                    class="btn btn-secondary AsignarOtroIngreso" {{ app.session.get('totalEstimadoOtroIngreso') != 0 ? 'disabled' }}>
                                                                Asignar
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4 col-md-12 col-sm-12" style="margin-top: 40px">
                                                        <div class="form-actions noborder">
                                                            <button type="button"
                                                                    class="btn btn-secondary ModificarOtroIngreso"
                                                                    disabled>
                                                                Modificar
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4 col-md-12 col-sm-12" style="margin-top: 40px">
                                                        <div class="form-actions noborder">
                                                            <button type="button"
                                                                    class="btn btn-secondary AprobarOtroIngreso"
                                                                    {{ app.session.get('totalEstimadoOtroIngreso') == 0 ? 'disabled' }}>
                                                                Aprobar
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-9 col-md-9 col-sm-9"
                                                 style="overflow-x:auto;margin-top: 20px">
                                                <div class="portlet chart" style="margin-top: 20px"
                                                     id="graficoOtroIngresoYear">
                                                <span id="nameSeccion2" class="caption-subject bold uppercase"
                                                      style="color: #009490"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        {% endif %}
                        {% if app.session.get('aprobarEstimadoRecursosHumanos') == false %}
                            <div class="tab-pane fade" id="salario">
                                <form role="form" id="formAddTotalFondoSalario">
                                    <div class="form-body">
                                        <div class="row">
                                            <div class="col-lg-3 col-md-3 col-sm-3">
                                                <div class="portlet">
                                                    <div class="col-lg-12 col-md-12 col-sm-12" style="margin-top: 80px">
                                                        <div class="form-group form-md-line-input input-icon right">
                                                            <i style="color: #111111">CUP</i>
                                                            <input type="text" class="form-control" onkeypress="return filterFloat(event,this);"
                                                                   id="totalFondoSalario"
                                                                   name="totalFondoSalario" >
                                                            <label for="totalFondoSalario">TOTAL DE PRESUPUESTO</label>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4 col-md-12 col-sm-12" style="margin-top: 40px">
                                                        <div class="form-actions noborder">
                                                            <button type="button"
                                                                    class="btn btn-secondary AsignarFondoSalario" {{ app.session.get('totalEstimadoRecursosHumanos') != 0 ? 'disabled' }}>
                                                                Asignar
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4 col-md-12 col-sm-12" style="margin-top: 40px">
                                                        <div class="form-actions noborder">
                                                            <button type="button"
                                                                    class="btn btn-secondary ModificarFondoSalario"
                                                                    disabled>Modificar
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4 col-md-12 col-sm-12" style="margin-top: 40px">
                                                        <div class="form-actions noborder">
                                                            <button type="button"
                                                                    class="btn btn-secondary AprobarFondoSalario"
                                                                    {{ app.session.get('totalEstimadoRecursosHumanos') == 0 ? 'disabled' }}>
                                                                Aprobar
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-9 col-md-9 col-sm-9"
                                                 style="overflow-x:auto;margin-top: 20px">
                                                <div class="portlet chart" style="margin-top: 20px"
                                                     id="graficoSalariosYear">
                                                <span id="nameSeccion1" class="caption-subject bold uppercase"
                                                      style="color: #009490"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        {% endif %}
                        {% if app.session.get('aprobarEstimadoOtrosGastos') == false %}
                            <div class="tab-pane fade" id="otroGasto">
                                <form role="form" id="formAddTotalOtroGasto">
                                    <div class="form-body">
                                        <div class="row">
                                            <div class="col-lg-3 col-md-3 col-sm-3">
                                                <div class="portlet">
                                                    <div class="col-lg-12 col-md-12 col-sm-12" style="margin-top: 80px">
                                                        <div class="form-group form-md-line-input input-icon right">
                                                            <i style="color: #111111">CUP</i>
                                                            <input type="text" class="form-control" onkeypress="return filterFloat(event,this);"
                                                                   id="totalOtrosGastos"
                                                                   name="totalOtrosGastos">
                                                            <label for="totalOtrosGastos">TOTAL DE PRESUPUESTO</label>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4 col-md-12 col-sm-12" style="margin-top: 40px">
                                                        <div class="form-actions noborder">
                                                            <button type="button"
                                                                    class="btn btn-secondary AsignarOtrosGastos" {{ app.session.get('totalEstimadoOtrosGastos') != 0 ? 'disabled' }}>
                                                                Asignar
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4 col-md-12 col-sm-12" style="margin-top: 40px">
                                                        <div class="form-actions noborder">
                                                            <button type="button"
                                                                    class="btn btn-secondary ModificarOtrosGastos"
                                                                    disabled>
                                                                Modificar
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4 col-md-12 col-sm-12" style="margin-top: 40px">
                                                        <div class="form-actions noborder">
                                                            <button type="button"
                                                                    class="btn btn-secondary AprobarOtrosGastos"
                                                                    {{ app.session.get('totalEstimadoOtrosGastos') == 0 ? 'disabled' }}>
                                                                Aprobar
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-9 col-md-9 col-sm-9"
                                                 style="overflow-x:auto;margin-top: 20px">
                                                <div class="portlet chart" style="margin-top: 20px"
                                                     id="graficoOtrosGastosYear">
                                                <span id="nameSeccion2" class="caption-subject bold uppercase"
                                                      style="color: #009490"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        {% endif %}
                        {% if app.session.get('aprobarEstimadoMateriaPrima') == false %}
                             <div class="tab-pane fade" id="materiaPrima">
                                <form role="form" id="formAddTotalMateriaPrima">
                                    <div class="form-body">
                                        <div class="row">
                                            <div class="col-lg-3 col-md-3 col-sm-3">
                                                <div class="portlet">
                                                    <div class="col-lg-12 col-md-12 col-sm-12" style="margin-top: 80px">
                                                        <div class="form-group form-md-line-input input-icon right">
                                                            <i style="color: #111111"></i>
                                                            <input type="text" class="form-control" onkeypress="return filterFloat(event,this);"
                                                                   id="totalMateriaPrima"
                                                                   name="totalMateriaPrima">
                                                            <label for="totalMateriaPrima">TOTAL DE PRESUPUESTO</label>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4 col-md-12 col-sm-12" style="margin-top: 40px">
                                                        <div class="form-actions noborder">
                                                            <button type="button"
                                                                    class="btn btn-secondary AsignarMateriaPrima" {{ app.session.get('totalEstimadoMateriaPrima') != 0 ? 'disabled' }}>
                                                                Asignar
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4 col-md-12 col-sm-12" style="margin-top: 40px">
                                                        <div class="form-actions noborder">
                                                            <button type="button"
                                                                    class="btn btn-secondary ModificarMateriaPrima"
                                                                    disabled>
                                                                Modificar
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4 col-md-12 col-sm-12" style="margin-top: 40px">
                                                        <div class="form-actions noborder">
                                                            <button type="button"
                                                                    class="btn btn-secondary AprobarMateriaPrima"
                                                                    {{ app.session.get('totalEstimadoMateriaPrima') == 0 ? 'disabled' }}>
                                                                Aprobar
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-9 col-md-9 col-sm-9"
                                                 style="overflow-x:auto;margin-top: 20px">
                                                <div class="portlet chart" style="margin-top: 20px"
                                                     id="graficoMateriaPrimaYear">
                                                <span id="nameSeccion2" class="caption-subject bold uppercase"
                                                      style="color: #009490"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        {% endif %}
                        {% if app.session.get('aprobarEstimadoEnergia') == false %}
                            <div class="tab-pane fade" id="energia">
                                <form role="form" id="formAddTotalEnergia">
                                    <div class="form-body">
                                        <div class="row">
                                            <div class="col-lg-3 col-md-3 col-sm-3">
                                                <div class="portlet">
                                                    <div class="col-lg-12 col-md-12 col-sm-12" style="margin-top: 80px">
                                                        <div class="form-group form-md-line-input input-icon right">
                                                            <i style="color: #111111">KW</i>
                                                            <input type="text" class="form-control" onkeypress="return filterFloat(event,this);"
                                                                   id="totalEnergia"
                                                                   name="totalEnergia">
                                                            <label for="totalEnergia">TOTAL DE KW</label>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4 col-md-12 col-sm-12" style="margin-top: 40px">
                                                        <div class="form-actions noborder">
                                                            <button type="button"
                                                                    class="btn btn-secondary AsignarEnergia" {{ app.session.get('totalEstimadoEnergia') != 0 ? 'disabled' }}>
                                                                Asignar
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4 col-md-12 col-sm-12" style="margin-top: 40px">
                                                        <div class="form-actions noborder">
                                                            <button type="button"
                                                                    class="btn btn-secondary ModificarEnergia"
                                                                    disabled>
                                                                Modificar
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4 col-md-12 col-sm-12" style="margin-top: 40px">
                                                        <div class="form-actions noborder">
                                                            <button type="button"
                                                                    class="btn btn-secondary AprobarEnergia"
                                                                    {{ app.session.get('totalEstimadoEnergia') == 0 ? 'disabled' }}>
                                                                Aprobar
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-9 col-md-9 col-sm-9"
                                                 style="overflow-x:auto;margin-top: 20px">
                                                <div class="portlet chart" style="margin-top: 20px"
                                                     id="graficoEnergiaYear">
                                                <span id="nameSeccion2" class="caption-subject bold uppercase"
                                                      style="color: #009490"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        {% endif %}
                        {% if app.session.get('aprobarEstimadoDepreciacion') == false %}
                             <div class="tab-pane fade" id="depreciacion">
                                <form role="form" id="formAddTotalDepreciacion">
                                    <div class="form-body">
                                        <div class="row">
                                            <div class="col-lg-3 col-md-3 col-sm-3">
                                                <div class="portlet">
                                                    <div class="col-lg-12 col-md-12 col-sm-12" style="margin-top: 80px">
                                                        <div class="form-group form-md-line-input input-icon right">
                                                            <i style="color: #111111"></i>
                                                            <input type="text" class="form-control" onkeypress="return filterFloat(event,this);"
                                                                   id="totalDepreciacion"
                                                                   name="totalDepreciacion">
                                                            <label for="totalDepreciacion">TOTAL DE PRESUPUESTO</label>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4 col-md-12 col-sm-12" style="margin-top: 40px">
                                                        <div class="form-actions noborder">
                                                            <button type="button"
                                                                    class="btn btn-secondary AsignarDepreciacion" {{ app.session.get('totalEstimadoDepreciacion') != 0 ? 'disabled' }}>
                                                                Asignar
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4 col-md-12 col-sm-12" style="margin-top: 40px">
                                                        <div class="form-actions noborder">
                                                            <button type="button"
                                                                    class="btn btn-secondary ModificarDepreciacion"
                                                                    disabled>
                                                                Modificar
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4 col-md-12 col-sm-12" style="margin-top: 40px">
                                                        <div class="form-actions noborder">
                                                            <button type="button"
                                                                    class="btn btn-secondary AprobarDepreciacion"
                                                                    {{ app.session.get('totalEstimadoDepreciacion') == 0 ? 'disabled' }}>
                                                                Aprobar
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-9 col-md-9 col-sm-9"
                                                 style="overflow-x:auto;margin-top: 20px">
                                                <div class="portlet chart" style="margin-top: 20px"
                                                     id="graficoDepreciacionYear">
                                                <span id="nameSeccion2" class="caption-subject bold uppercase"
                                                      style="color: #009490"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        {% endif %}
                        {% if app.session.get('aprobarEstimadoBonificacion') == false %}
                             <div class="tab-pane fade" id="bonificacion">
                                <form role="form" id="formAddTotalBonificacion">
                                    <div class="form-body">
                                        <div class="row">
                                            <div class="col-lg-3 col-md-3 col-sm-3">
                                                <div class="portlet">
                                                    <div class="col-lg-12 col-md-12 col-sm-12" style="margin-top: 80px">
                                                        <div class="form-group form-md-line-input input-icon right">
                                                            <i style="color: #111111"></i>
                                                            <input type="text" class="form-control" onkeypress="return filterFloat(event,this);"
                                                                   id="totalBonificacion"
                                                                   name="totalBonificacion">
                                                            <label for="totalBonificacion">TOTAL DE PRESUPUESTO</label>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4 col-md-12 col-sm-12" style="margin-top: 40px">
                                                        <div class="form-actions noborder">
                                                            <button type="button"
                                                                    class="btn btn-secondary AsignarBonificacion" {{ app.session.get('totalEstimadoBonificacion') != 0 ? 'disabled' }}>
                                                                Asignar
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4 col-md-12 col-sm-12" style="margin-top: 40px">
                                                        <div class="form-actions noborder">
                                                            <button type="button"
                                                                    class="btn btn-secondary ModificarBonificacion"
                                                                    disabled>
                                                                Modificar
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4 col-md-12 col-sm-12" style="margin-top: 40px">
                                                        <div class="form-actions noborder">
                                                            <button type="button"
                                                                    class="btn btn-secondary AprobarBonificacion"
                                                                    {{ app.session.get('totalEstimadoBonificacion') == 0 ? 'disabled' }}>
                                                                Aprobar
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-9 col-md-9 col-sm-9"
                                                 style="overflow-x:auto;margin-top: 20px">
                                                <div class="portlet chart" style="margin-top: 20px"
                                                     id="graficoBonificacionYear">
                                                <span id="nameSeccion2" class="caption-subject bold uppercase"
                                                      style="color: #009490"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        {% endif %}
                        {% if app.session.get('aprobarEstimadoComedor') == false %}
                             <div class="tab-pane fade" id="comedor">
                                <form role="form" id="formAddTotalComedor">
                                    <div class="form-body">
                                        <div class="row">
                                            <div class="col-lg-3 col-md-3 col-sm-3">
                                                <div class="portlet">
                                                    <div class="col-lg-12 col-md-12 col-sm-12" style="margin-top: 80px">
                                                        <div class="form-group form-md-line-input input-icon right">
                                                            <i style="color: #111111"></i>
                                                            <input type="text" class="form-control" onkeypress="return filterFloat(event,this);"
                                                                   id="totalComedor"
                                                                   name="totalComedor">
                                                            <label for="totalComedor">TOTAL DE PRESUPUESTO</label>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4 col-md-12 col-sm-12" style="margin-top: 40px">
                                                        <div class="form-actions noborder">
                                                            <button type="button"
                                                                    class="btn btn-secondary AsignarComedor" {{ app.session.get('totalEstimadoComedor') != 0 ? 'disabled' }}>
                                                                Asignar
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4 col-md-12 col-sm-12" style="margin-top: 40px">
                                                        <div class="form-actions noborder">
                                                            <button type="button"
                                                                    class="btn btn-secondary ModificarComedor"
                                                                    disabled>
                                                                Modificar
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4 col-md-12 col-sm-12" style="margin-top: 40px">
                                                        <div class="form-actions noborder">
                                                            <button type="button"
                                                                    class="btn btn-secondary AprobarComedor"
                                                                    {{ app.session.get('totalEstimadoComedor') == 0 ? 'disabled' }}>
                                                                Aprobar
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-9 col-md-9 col-sm-9"
                                                 style="overflow-x:auto;margin-top: 20px">
                                                <div class="portlet chart" style="margin-top: 20px"
                                                     id="graficoComedorYear">
                                                <span id="nameSeccion2" class="caption-subject bold uppercase"
                                                      style="color: #009490"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        {% endif %}
                        {#{% if app.session.get('aprobarEstimadoAmortizacion') == false %}
                             <div class="tab-pane fade" id="amortizacion">
                                <form role="form" id="formAddTotalAmortizacion">
                                    <div class="form-body">
                                        <div class="row">
                                            <div class="col-lg-3 col-md-3 col-sm-3">
                                                <div class="portlet">
                                                    <div class="col-lg-12 col-md-12 col-sm-12" style="margin-top: 80px">
                                                        <div class="form-group form-md-line-input input-icon right">
                                                            <i style="color: #111111"></i>
                                                            <input type="text" class="form-control" onkeypress="return filterFloat(event,this);"
                                                                   id="totalAmortizacion"
                                                                   name="totalAmortizacion">
                                                            <label for="totalAmortizacion">TOTAL DE PRESUPUESTO</label>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-3 col-md-12 col-sm-12" style="margin-top: 40px">
                                                        <div class="form-actions noborder">
                                                            <button type="button"
                                                                    class="btn btn-secondary AsignarAmortizacion" {{ app.session.get('totalEstimadoAmortizacion') != 0 ? 'disabled' }}>
                                                                Asignar
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-3 col-md-12 col-sm-12" style="margin-top: 40px">
                                                        <div class="form-actions noborder">
                                                            <button type="button"
                                                                    class="btn btn-secondary ModificarAmortizacion"
                                                                    disabled>
                                                                Modificar
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-5 col-md-12 col-sm-12" style="margin-top: 40px">
                                                        <div class="form-actions noborder">
                                                            <button type="button"
                                                                    class="btn btn-secondary AprobarAmortizacion"
                                                                    {{ app.session.get('totalEstimadoAmortizacion') == 0 ? 'disabled' }}>
                                                                Aprobar presupuesto
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-9 col-md-9 col-sm-9"
                                                 style="overflow-x:auto;margin-top: 20px">
                                                <div class="portlet chart" style="margin-top: 20px"
                                                     id="graficoAmortizacionYear">
                                                <span id="nameSeccion2" class="caption-subject bold uppercase"
                                                      style="color: #009490"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        {% endif %}#}
                        {% if app.session.get('aprobarEstimadoCombustible') == false %}
                            <div class="tab-pane fade" id="combustible">
                                <form role="form" id="formAddTotalCombustible">
                                    <div class="form-body">
                                        <div class="row">
                                            <div class="col-lg-3 col-md-3 col-sm-3">
                                                <div class="portlet">
                                                    <div class="col-lg-12 col-md-12 col-sm-12" style="margin-top: 40px">
                                                        <div class="form-group form-md-line-input">
                                                            <select class="form-control" id="tipoCombustible"
                                                                    name="tipoCombustible">
                                                                <option value="0">Seleccione ...</option>
                                                                {% if tiposCombustiblesPrecios %}
                                                                        {% for tipo in  tiposCombustiblesPrecios %}
                                                                            <option value="{{ tipo.id }}">{{ tipo.nombre }}</option>
                                                                        {% endfor %}
                                                                {% endif %}
                                                            </select>
                                                               <label for="tipoCombustible">TIPO DE COMBUSTIBLE</label>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-12 col-md-12 col-sm-12" style="margin-top: 40px">
                                                        <div class="form-group form-md-line-input input-icon right">
                                                            <i style="color: #111111"></i>
                                                            <input type="text" class="form-control" onkeypress="return filterFloat(event,this);"
                                                                   id="totalCombustible"
                                                                   name="totalCombustible" disabled>
                                                            <label for="totalCombustible">TOTAL DE LITROS</label>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4 col-md-12 col-sm-12" style="margin-top: 20px">
                                                        <div class="form-actions noborder">
                                                            <button type="button"
                                                                    class="btn btn-secondary AsignarCombustible" disabled>
                                                                Asignar
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4 col-md-12 col-sm-12" style="margin-top: 20px">
                                                        <div class="form-actions noborder">
                                                            <button type="button"
                                                                    class="btn btn-secondary ModificarCombustible"
                                                                    disabled>
                                                                Modificar
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4 col-md-12 col-sm-12" style="margin-top: 20px">
                                                        <div class="form-actions noborder">
                                                            <button type="button"
                                                                    class="btn btn-secondary AprobarCombustible"
                                                                    {{ app.session.get('totalEstimadoCombustible') == 0 ? 'disabled' }}>
                                                                Aprobar
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-9 col-md-9 col-sm-9"
                                                 style="overflow-x:auto;margin-top: 20px">
                                                <div class="portlet chart" style="margin-top: 20px"
                                                     id="graficoCombustibleYear">
                                                <span id="nameSeccion2" class="caption-subject bold uppercase"
                                                      style="color: #009490"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        {% endif %}
                        {% if app.session.get('aprobarEstimadoLubricante') == false %}
                            <div class="tab-pane fade" id="lubricante">
                                <form role="form" id="formAddTotalLubricante">
                                    <div class="form-body">
                                        <div class="row">
                                            <div class="col-lg-3 col-md-3 col-sm-3">
                                                <div class="portlet">
                                                    <div class="col-lg-12 col-md-12 col-sm-12" style="margin-top: 40px">
                                                        <div class="form-group form-md-line-input">
                                                            <select class="form-control" id="tipoLubricante"
                                                                    name="tipoLubricante">
                                                                <option value="0">Seleccione ...</option>
                                                                    {% if tiposLubricantesPrecios %}
                                                                         {% for tipo in  tiposLubricantesPrecios %}
                                                                            <option value="{{ tipo.id }}">{{ tipo.nombre }}</option>
                                                                        {% endfor %}
                                                                    {% endif %}
                                                            </select>
                                                               <label for="tipoCombustible">ACEITES Y LUBRICANTES</label>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-12 col-md-12 col-sm-12" style="margin-top: 40px">
                                                        <div class="form-group form-md-line-input input-icon right">
                                                            <i style="color: #111111"></i>
                                                            <input type="text" class="form-control" onkeypress="return filterFloat(event,this);"
                                                                   id="totalLubricante"
                                                                   name="totalLubricante" disabled>
                                                            <label for="totalLubricante">TOTAL DE LITROS</label>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4 col-md-12 col-sm-12" style="margin-top: 20px">
                                                        <div class="form-actions noborder">
                                                            <button type="button"
                                                                    class="btn btn-secondary AsignarLubricante" disabled>
                                                                Asignar
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4 col-md-12 col-sm-12" style="margin-top: 20px">
                                                        <div class="form-actions noborder">
                                                            <button type="button"
                                                                    class="btn btn-secondary ModificarLubricante"
                                                                    disabled>
                                                                Modificar
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4 col-md-12 col-sm-12" style="margin-top: 20px">
                                                        <div class="form-actions noborder">
                                                            <button type="button"
                                                                    class="btn btn-secondary AprobarLubricante"
                                                                    {{ app.session.get('totalEstimadoLubricante') == 0 ? 'disabled' }}>
                                                                Aprobar
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-9 col-md-9 col-sm-9"
                                                 style="overflow-x:auto;margin-top: 20px">
                                                <div class="portlet chart" style="margin-top: 20px"
                                                     id="graficoLubricanteYear">
                                                <span id="nameSeccion2" class="caption-subject bold uppercase"
                                                      style="color: #009490"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        {% endif %}
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <!-- BEGIN GRAFICOS HIGHSTOCK LEVEL PLUGINS -->
    <script src="{{ asset('easyadmin/plugins/highstock/code/highstock.js') }}"></script>
    <script src="{{ asset('easyadmin/plugins/highstock/code/modules/annotations.js') }}"></script>
    <script src="{{ asset('easyadmin/plugins/highstock/code/modules/exporting.js') }}"></script>
    <script src="{{ asset('easyadmin/plugins/highstock/code/modules/export-data.js') }}"></script>
    <script src="{{ asset('easyadmin/plugins/highstock/code/modules/export-clientside.js') }}"></script>
    <!-- END  GRAFICOS HIGHSTOCK LEVEL PLUGINS -->
    <script src="{{ asset('easyadmin/tema/select2/select2.full.min.js') }}"></script>
    <script src="{{ asset('easyadmin/plugins/bootstrap-toastr/toastr.min.js') }}"></script>
    <script src="{{ asset('easyadmin/plugins/bootstrap-toastr/ui-toastr.js') }}"></script>
    <script>
        $(document).ready(function () {

            (function(){
                {% if not (is_granted("ROLE_DISTRIBUIDOR_PRINCIPAL")) %}
                window.location.href = "{{ path('login') }}";
                {% else %}
                {% for nivel in app.user.nivelAccesos() if nivel == 'ESTIMADO_INDICADORES' %}
                {% else %}
                window.location.href = "{{ path('login') }}";
                {% endfor %}
                {% endif %}
            })();

            $('#btnAtrasPlan').on("click", function () {
                window.location.href = "{{ path('gestionarPlanesEstimados') }}";
            });

            //Declaracion de variables
            var totalPlan = [];
            var totalEstimadoVenta = [];
            var totalEstimadoFondoSalario = [];
            var totalEstimadoOtrosGastos = [];
            var totalEstimadoMateriasPrimas = [];
            var nameTipoCombustible = [];
            var totalEstimadoCombustibleLitros = [];
            var nameTipoLubricante = [];
            var totalEstimadoLubricanteLitros = [];
            var totalEstimadoEnergia = [];
            var totalEstimadoDepreciacion = [];
            var totalEstimadoBonificacion = [];
            var totalEstimadoComedor = [];
            var totalEstimadoOtroIngreso = [];
            var totalEstimadoAmortizacion = [];
            var tipo = 0;
            var precio = 0;
            var tipoCombustible = 0;
            var ltsAnterior = 0;
            var title = 'Alerta';
            var mensaje = '';

            $('.nav li a').click(function () {
                if($(this).attr("href")==='#combustible') {
                     //Toast
                    {% if not tiposCombustiblesPrecios %}
                        mensaje = 'Debe establecer el precio del combustible para este año';
                        UIToastr.init(title,mensaje);
                    {% endif %}
               }
                if($(this).attr("href")==='#lubricante') {
                     //Toast
                    {% if not tiposLubricantesPrecios %}
                        mensaje = 'Debe establecer el precio del aceite para este año';
                        UIToastr.init(title,mensaje);
                    {% endif %}
               }
            });

            //Arreglo para el grafico de Presupuesto Estimado por Años
            {% for graficoTotal in graficosTotales %}
            totalPlan.push({
                name: 'Ventas',
                y: parseInt('{{ graficoTotal['totalVenta'] }}')
            }, {
                name: 'Otros Ingresos',
                y: parseInt('{{ graficoTotal['totalOtroIngreso'] }}')
            }, {
                name: 'Salario',
                y: parseInt('{{ graficoTotal['totalFondoSalario'] }}')
            },  {
                name: 'Combustible',
                y: parseFloat('{{ graficoTotal['totalLtsCombustible'] }}')
            }, {
                name: 'Lubricante',
                y: parseFloat('{{ graficoTotal['totalLtsLubricante'] }}')
            }, {
                name: 'Energía',
                y: parseFloat('{{ graficoTotal['totalEnergiaKW'] }}')
            }, {
                name: 'Otros Gastos',
                y: parseInt('{{ graficoTotal['totalOtrosGastos'] }}')
            }, {
                name: 'Materias Primas',
                y: parseInt('{{ graficoTotal['totalMateriaPrima'] }}')
            }, {
                name: 'Depreciación',
                y: parseInt('{{ graficoTotal['totalDepreciacion'] }}')
            },{
                name: 'Bonificacion',
                y: parseInt('{{ graficoTotal['totalBonificacion'] }}')
            },{
                name: 'Comedor',
                y: parseInt('{{ graficoTotal['totalComedor'] }}')
            },/* {
                name: 'Amortización',
                y: parseInt('{#{{ graficoTotal['totalAmortizacion'] }}#}')
            }*/);
            totalEstimadoVenta.push({
                name: '{{ graficoTotal['year'] }}',
                y: parseInt('{{ graficoTotal['totalVenta'] }}')
            });
            totalEstimadoOtroIngreso.push({
                name: '{{ graficoTotal['year'] }}',
                y: parseInt('{{ graficoTotal['totalOtroIngreso'] }}')
            });
            totalEstimadoFondoSalario.push({
                name: '{{ graficoTotal['year'] }}',
                y: parseInt('{{ graficoTotal['totalFondoSalario'] }}')
            });
            totalEstimadoOtrosGastos.push({
                name: '{{ graficoTotal['year'] }}',
                y: parseInt('{{ graficoTotal['totalOtrosGastos'] }}')
            });
            totalEstimadoEnergia.push({
                name: '{{ graficoTotal['year'] }}',
                y: parseInt('{{ graficoTotal['totalEnergiaKW'] }}')
            });
            totalEstimadoMateriasPrimas.push({
                name: '{{ graficoTotal['year'] }}',
                y: parseInt('{{ graficoTotal['totalMateriaPrima'] }}')
            });
            totalEstimadoDepreciacion.push({
                name: '{{ graficoTotal['year'] }}',
                y: parseInt('{{ graficoTotal['totalDepreciacion'] }}')
            });
            totalEstimadoBonificacion.push({
                name: '{{ graficoTotal['year'] }}',
                y: parseInt('{{ graficoTotal['totalBonificacion'] }}')
            });
            totalEstimadoComedor.push({
                name: '{{ graficoTotal['year'] }}',
                y: parseInt('{{ graficoTotal['totalComedor'] }}')
            });
            /*totalEstimadoAmortizacion.push({
                name: '{#{{ graficoTotal['year'] }}#}',
                y: parseInt('{#{{ graficoTotal['totalAmortizacion'] }}#}')
            });*/
            {% endfor %}

            {% for graficoTotal in graficosCombustibles %}
                    nameTipoCombustible.push('{{ graficoTotal['nombre'] }}');
                    totalEstimadoCombustibleLitros.push(parseInt({{ graficoTotal['lts'] }}));
            {% endfor %}

            {% for graficoTotal in graficosLubricantes %}
                    nameTipoLubricante.push('{{ graficoTotal['nombre'] }}');
                    totalEstimadoLubricanteLitros.push(parseInt({{ graficoTotal['lts'] }}));
            {% endfor %}

            (function () {
                {% if app.session.get('aprobarEstimadoVenta') == false %}
                if (totalEstimadoVenta.length !== 0) {
                    graficoTotalEstimadoVenta();
                }
                {% endif %}
                {% if app.session.get('aprobarEstimadoOtroIngreso') == false %}
                if (totalEstimadoOtroIngreso.length !== 0) {
                    graficoTotalOtroIngreso();
                }
                {% endif %}
                {% if app.session.get('aprobarEstimadoRecursosHumanos') == false %}
                if (totalEstimadoFondoSalario.length !== 0) {
                    graficoTotalFondoSalario();
                }
                {% endif %}
                {% if app.session.get('aprobarEstimadoOtrosGastos') == false %}
                if (totalEstimadoOtrosGastos.length !== 0) {
                    graficoTotalOtrosGastos();
                }
                {% endif %}
                {% if app.session.get('aprobarEstimadoCombustible') == false %}
                if (totalEstimadoCombustibleLitros.length !== 0) {
                    graficoTipoCombustible();
                }
                {% endif %}
                {% if app.session.get('aprobarEstimadoLubricante') == false %}
                if (totalEstimadoLubricanteLitros.length !== 0) {
                    graficoTipoLubricante();
                }
                {% endif %}
                {% if app.session.get('aprobarEstimadoEnergia') == false %}
                if (totalEstimadoEnergia.length !== 0) {
                    graficoTotalKW();
                }
                {% endif %}
                {% if app.session.get('aprobarEstimadoMateriaPrima') == false %}
                if (totalEstimadoMateriasPrimas.length !== 0) {
                    graficoTotalMateriaPrima();
                }
                {% endif %}
                {% if app.session.get('aprobarEstimadoDepreciacion') == false %}
                if (totalEstimadoDepreciacion.length !== 0) {
                    graficoTotalDepreciacion();
                }
                {% endif %}
                {% if app.session.get('aprobarEstimadoBonificacion') == false %}
                if (totalEstimadoBonificacion.length !== 0) {
                    graficoTotalBonificacion();
                }
                {% endif %}
                {% if app.session.get('aprobarEstimadoComedor') == false %}
                if (totalEstimadoComedor.length !== 0) {
                    graficoTotalComedor();
                }
                {% endif %}
                {#{% if app.session.get('aprobarEstimadoAmortizacion') == false %}
                if (totalEstimadoAmortizacion.length !== 0) {
                    graficoTotalAmortizacion();
                }
                {% endif %}#}
                graficoTotales();
            })();

            //Funciones para gestionar el inicio del Plan

            function graficoTotales() {
                var valorMax = totalPlan.length - 1;
                var valorScrollbar = false;
                if (totalPlan.length > 6) {
                    valorMax = 5;
                    valorScrollbar = true;
                }
                Highcharts.chart('graficoPlanYear', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: 'DISTRIBUCIÓN DEL PRESUPUESTO'
                    },
                    exporting: {
                        enabled: false
                    },
                    scrollbar: {
                        enabled: valorScrollbar,
                        liveRedraw: true,
                        step: 1
                    },
                    xAxis: {
                        type: 'category',
                        min: 0,
                        max: valorMax,
                        useHTML: true
                    },
                    yAxis: {
                        title: {
                            text: 'Presupuesto Estimado',
                            useHTML: true
                        }

                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            borderWidth: 0,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            getExtremesFromAll: true,
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return Highcharts.numberFormat(this.y, 2, '.', ',');
                                }
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                        pointFormat: '<span style="color:{point.color}">{point.name}</span>' + ' presupuesto asignado ' + '<b>{point.y:,.2f}</b>'
                    },

                    "series": [
                        {
                            "name": "Años",
                            "colorByPoint": true,
                            "data": totalPlan
                        }
                    ],
                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 800
                            },
                            chartOptions: {
                                scrollbar: {
                                    enabled: true
                                },
                                xAxis: {
                                    min: 0,
                                    max: 1,
                                    useHTML: true
                                }
                            }
                        }]
                    }
                });
            }

            $('.IniciarPlan').on('click', function () {
                var d = new Date();
                var yearActual = d.getFullYear();

                //Validaciones
                if ($("#yearPlan").val() === '') {
                    alertify.alert('<strong>El año es obligatorio, no puede quedar en blanco.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                if ($("#yearPlan").val() < yearActual) {
                    alertify.alert('<strong>El año es no puede ser menor que ' + yearActual + '.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                $(".preload").removeClass('hidden');

                var mat_datos = {
                    year: $("#yearPlan").val()
                };
                $.ajax({
                    type: "POST",
                    dataType: "html",
                    url: '{{ path("inicioPlanEstimado") }}',
                    data: mat_datos
                }).done(function (data) {

                    $(".preload").addClass('hidden');
                    if (data === 'ok') {

                        alertify.alert('<strong>Se inició el plan de indicadores principales correctamente</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ok-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Confirmación</h4>')
                            .set('label', 'Aceptar')
                            .set('onok', function () {
                                window.location.href = "{{ path('gestionarPlanesEstimados') }}";
                            });
                    } else {
                        alertify.alert('<strong>' + data + '</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                            .set('label', 'Aceptar')
                    }
                });

            });

            $('.AprobarPlan').on('click', function () {

                alert('{{ app.session.get('idPlanEstimado') }}');

            });

            //Fin de las funciones de Inicio del Plan

            //Funciones para gestionar el presupuesto total de venta

            function cargarTotalVenta(presupuesto, colorSeleccionado) {

                $('#totalVentaContable').val(presupuesto);
                $('.AsignarTotalVenta').prop("disabled", true);
                $('.ModificarTotalVenta').prop("disabled", false);
                $('.AprobarTotalVenta').prop("disabled", false);

            }

            function graficoTotalEstimadoVenta() {
                var valorMax = totalEstimadoVenta.length - 1;
                var valorScrollbar = false;
                if (totalEstimadoVenta.length > 6) {
                    valorMax = 5;
                    valorScrollbar = true;
                }
                Highcharts.chart('graficoVentasYear', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: 'DISTRIBUCIÓN DEL PRESUPUESTO'
                    },
                    exporting: {
                        enabled: false
                    },
                    scrollbar: {
                        enabled: valorScrollbar,
                        liveRedraw: true,
                        step: 1
                    },
                    xAxis: {
                        type: 'category',
                        min: 0,
                        max: valorMax,
                        useHTML: true
                    },
                    yAxis: {
                        title: {
                            text: 'Presupuesto Estimado',
                            useHTML: true
                        }

                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            borderWidth: 0,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            getExtremesFromAll: true,
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return Highcharts.numberFormat(this.y, 0, ',', '.');
                                }
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                        pointFormat: '<span style="color:{point.color}">{point.name}</span>' + ' presupuesto asignado ' + '<b>{point.y:,.0f}</b>'
                    },

                    "series": [
                        {
                            "name": "Años",
                            "colorByPoint": true,
                            "data": totalEstimadoVenta,
                            events: {
                                click: function (oEvent) {
                                    cargarTotalVenta(oEvent.point.y, oEvent.point.color);
                                }
                            }
                        }
                    ],
                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 500
                            },
                            chartOptions: {
                                scrollbar: {
                                    enabled: true
                                },
                                xAxis: {
                                    min: 0,
                                    max: 1,
                                    useHTML: true
                                }
                            }
                        }]
                    }
                });
            }

            $('.AsignarTotalVenta').on('click', function () {

                //Validaciones
                if ($("#totalVentaContable").val() === '') {
                    alertify.alert('<strong>El total de presupuesto es obligatorio, no puede quedar en blanco.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                //Validaciones
                if ($("#totalVentaContable").val() === '0') {
                    alertify.alert('<strong>El total de presupuesto debe ser mayor que 0.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                $(".preload").removeClass('hidden');

                var mat_datos = {
                    presupuesto: $("#totalVentaContable").val(),
                    idPlanEstimado: {{ app.session.get('idPlanEstimado') }}
                };
                $.ajax({
                    type: "POST",
                    dataType: "html",
                    url: '{{ path("insertTotalEstimadoVenta") }}',
                    data: mat_datos
                }).done(function (data) {

                    $(".preload").addClass('hidden');
                    if (data === 'ok') {

                        alertify.alert('<strong>Se asignó el presupuesto estimado del plan de venta correctamente</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ok-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Confirmación</h4>')
                            .set('label', 'Aceptar')
                            .set('onok', function () {
                                window.location.href = "{{ path('gestionarPlanesEstimados') }}";
                            });
                    } else {
                        alertify.alert('<strong>' + data + '</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                            .set('label', 'Aceptar')
                    }
                });

            });

            $('.ModificarTotalVenta').on('click', function () {

                //Validaciones
                if ($("#totalVentaContable").val() === '') {
                    alertify.alert('<strong>El total de presupuesto es obligatorio, no puede quedar en blanco.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                //Validaciones
                if ($("#totalVentaContable").val() === '0') {
                    alertify.alert('<strong>El total de presupuesto debe ser mayor que 0.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                $(".preload").removeClass('hidden');

                var mat_datos = {
                    presupuesto: $("#totalVentaContable").val(),
                    idPlanEstimado: {{ app.session.get('idPlanEstimado') }}
                };
                $.ajax({
                    type: "POST",
                    dataType: "html",
                    url: '{{ path("updateTotalEstimadoVenta") }}',
                    data: mat_datos
                }).done(function (data) {

                    $(".preload").addClass('hidden');
                    if (data === 'ok') {

                        alertify.alert('<strong>Se modificó el total del presupuesto estimado del plan de ventas</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ok-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Confirmación</h4>')
                            .set('label', 'Aceptar')
                            .set('onok', function () {
                                window.location.href = "{{ path('gestionarPlanesEstimados') }}";
                            });
                    } else {
                        alertify.alert('<strong>' + data + '</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                            .set('label', 'Aceptar')
                    }
                });

            });

            $('.AprobarTotalVenta').on('click', function () {

                alertify.confirm('Basic: false').set('message', '<strong>Seguro que desea aprobar el total del presupuesto estimado para el plan de ventas</strong>').set('onok', function () {

                    $(".preload").removeClass('hidden');

                    var mat_datos = {
                        idPlanEstimado: {{ app.session.get('idPlanEstimado') }}
                    };
                    $.ajax({
                        type: "POST",
                        dataType: "html",
                        url: '{{ path("aprobarTotalPresupuestoEstimadoVenta") }}',
                        data: mat_datos
                    }).done(function (data) {

                        $(".preload").addClass('hidden');
                        if (data === 'ok') {

                            alertify.alert('<strong>Se aprobó el total del presupuesto estimado del plan de ventas</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ok-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Confirmación</h4>')
                                .set('label', 'Aceptar')
                                .set('onok', function () {
                                    window.location.href = "{{ path('gestionarPlanesEstimados') }}";
                                });
                        } else {
                            alertify.alert('<strong>' + data + '</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                                .set('label', 'Aceptar')
                        }
                    });
                });

            });

            //Fin de las funciones de venta

            //Funciones para gestionar el presupuesto de Otros Ingresos

            function cargarTotalOtroIngreso(presupuesto, colorSeleccionado) {

                $('#totalOtroIngreso').val(presupuesto);
                $('.AsignarOtroIngreso').prop("disabled", true);
                $('.ModificarOtroIngreso').prop("disabled", false);
                $('.AprobarOtroIngreso').prop("disabled", false);

            }

            function graficoTotalOtroIngreso() {
                var valorMax = totalEstimadoOtroIngreso.length - 1;
                var valorScrollbar = false;
                if (totalEstimadoOtroIngreso.length > 6) {
                    valorMax = 5;
                    valorScrollbar = true;
                }
                Highcharts.chart('graficoOtroIngresoYear', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: 'DISTRIBUCIÓN DEL PRESUPUESTO'
                    },
                    exporting: {
                        enabled: false
                    },
                    scrollbar: {
                        enabled: valorScrollbar,
                        liveRedraw: true,
                        step: 1
                    },
                    xAxis: {
                        type: 'category',
                        min: 0,
                        max: valorMax,
                        useHTML: true
                    },
                    yAxis: {
                        title: {
                            text: 'Presupuesto Estimado',
                            useHTML: true
                        }

                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            borderWidth: 0,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            getExtremesFromAll: true,
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return Highcharts.numberFormat(this.y, 0, ',', '.');
                                }
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                        pointFormat: '<span style="color:{point.color}">{point.name}</span>' + ' presupuesto asignado ' + '<b>{point.y:,.0f}</b>'
                    },

                    "series": [
                        {
                            "name": "Años",
                            "colorByPoint": true,
                            "data": totalEstimadoOtroIngreso,
                            events: {
                                click: function (oEvent) {
                                    cargarTotalOtroIngreso(oEvent.point.y, oEvent.point.color);
                                }
                            }
                        }
                    ],
                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 800
                            },
                            chartOptions: {
                                scrollbar: {
                                    enabled: true
                                },
                                xAxis: {
                                    min: 0,
                                    max: 1,
                                    useHTML: true
                                }
                            }
                        }]
                    }
                });
            }

            $('.AsignarOtroIngreso').on('click', function () {

                //Validaciones
                if ($("#totalOtroIngreso").val() === '') {
                    alertify.alert('<strong>El total de presupuesto es obligatorio, no puede quedar en blanco.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                //Validaciones
                if ($("#totalOtroIngreso").val() === '0') {
                    alertify.alert('<strong>El total de presupuesto debe ser mayor que 0.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                $(".preload").removeClass('hidden');

                var mat_datos = {
                    presupuesto: $("#totalOtroIngreso").val(),
                    idPlanEstimado: {{ app.session.get('idPlanEstimado') }}
                };
                $.ajax({
                    type: "POST",
                    dataType: "html",
                    url: '{{ path("insertTotalOtroIngreso") }}',
                    data: mat_datos
                }).done(function (data) {

                    $(".preload").addClass('hidden');
                    if (data === 'ok') {

                        alertify.alert('<strong>Se asignó el presupuesto estimado de otros ingresos correctamente</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ok-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Confirmación</h4>')
                            .set('label', 'Aceptar')
                            .set('onok', function () {
                                window.location.href = "{{ path('gestionarPlanesEstimados') }}";
                            });
                    } else {
                        alertify.alert('<strong>' + data + '</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                            .set('label', 'Aceptar')
                    }
                });

            });

            $('.ModificarOtroIngreso').on('click', function () {

                //Validaciones
                if ($("#totalOtroIngreso").val() === '') {
                    alertify.alert('<strong>El total de presupuesto es obligatorio, no puede quedar en blanco.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                //Validaciones
                if ($("#totalOtroIngreso").val() === '0') {
                    alertify.alert('<strong>El total de presupuesto debe ser mayor que 0.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                $(".preload").removeClass('hidden');

                var mat_datos = {
                    presupuesto: $("#totalOtroIngreso").val(),
                    idPlanEstimado: {{ app.session.get('idPlanEstimado') }}
                };
                $.ajax({
                    type: "POST",
                    dataType: "html",
                    url: '{{ path("updateTotalOtroIngreso") }}',
                    data: mat_datos
                }).done(function (data) {

                    $(".preload").addClass('hidden');
                    if (data === 'ok') {

                        alertify.alert('<strong>Se modificó el total del presupuesto estimado de otros ingresos</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ok-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Confirmación</h4>')
                            .set('label', 'Aceptar')
                            .set('onok', function () {
                                window.location.href = "{{ path('gestionarPlanesEstimados') }}";
                            });
                    } else {
                        alertify.alert('<strong>' + data + '</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                            .set('label', 'Aceptar')
                    }
                });

            });

            $('.AprobarOtroIngreso').on('click', function () {

                alertify.confirm('Basic: false').set('message', '<strong>Seguro que desea aprobar el total del presupuesto estimado de otros ingresos</strong>').set('onok', function () {

                    $(".preload").removeClass('hidden');

                    var mat_datos = {
                        idPlanEstimado: {{ app.session.get('idPlanEstimado') }}
                    };
                    $.ajax({
                        type: "POST",
                        dataType: "html",
                        url: '{{ path("aprobarTotalOtroIngreso") }}',
                        data: mat_datos
                    }).done(function (data) {

                        $(".preload").addClass('hidden');
                        if (data === 'ok') {

                            alertify.alert('<strong>Se aprobó el total del presupuesto estimado de otros ingresos</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ok-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Confirmación</h4>')
                                .set('label', 'Aceptar')
                                .set('onok', function () {
                                    window.location.href = "{{ path('gestionarPlanesEstimados') }}";
                                });
                        } else {
                            alertify.alert('<strong>' + data + '</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                                .set('label', 'Aceptar')
                        }
                    });
                });

            });

            //Fin de las funciones del presupuesto de Otros Ingresos

            //Funciones para gestionar el fondo de salario

            function cargarTotalFondoSalario(presupuesto, colorSeleccionado) {

                $('#totalFondoSalario').val(presupuesto);
                $('.AsignarFondoSalario').prop("disabled", true);
                $('.ModificarFondoSalario').prop("disabled", false);
                $('.AprobarFondoSalario').prop("disabled", false);

            }

            function graficoTotalFondoSalario() {
                var valorMax = totalEstimadoFondoSalario.length - 1;
                var valorScrollbar = false;
                if (totalEstimadoFondoSalario.length > 6) {
                    valorMax = 5;
                    valorScrollbar = true;
                }
                Highcharts.chart('graficoSalariosYear', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: 'DISTRIBUCIÓN DEL PRESUPUESTO'
                    },
                    exporting: {
                        enabled: false
                    },
                    scrollbar: {
                        enabled: valorScrollbar,
                        liveRedraw: true,
                        step: 1
                    },
                    xAxis: {
                        type: 'category',
                        min: 0,
                        max: valorMax,
                        useHTML: true
                    },
                    yAxis: {
                        title: {
                            text: 'Presupuesto Estimado',
                            useHTML: true
                        }

                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            borderWidth: 0,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            getExtremesFromAll: true,
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return Highcharts.numberFormat(this.y, 0, ',', '.');
                                }
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                        pointFormat: '<span style="color:{point.color}">{point.name}</span>' + ' presupuesto asignado ' + '<b>{point.y:,.0f}</b>'
                    },

                    "series": [
                        {
                            "name": "Años",
                            "colorByPoint": true,
                            "data": totalEstimadoFondoSalario,
                            events: {
                                click: function (oEvent) {
                                    cargarTotalFondoSalario(oEvent.point.y, oEvent.point.color);
                                }
                            }
                        }
                    ],
                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 500
                            },
                            chartOptions: {
                                scrollbar: {
                                    enabled: true
                                },
                                xAxis: {
                                    min: 0,
                                    max: 1,
                                    useHTML: true
                                }
                            }
                        }]
                    }
                });
            }

            $('.AsignarFondoSalario').on('click', function () {

                //Validaciones
                if ($("#totalFondoSalario").val() === '') {
                    alertify.alert('<strong>El total de presupuesto es obligatorio, no puede quedar en blanco.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                //Validaciones
                if ($("#totalFondoSalario").val() === '0') {
                    alertify.alert('<strong>El total de presupuesto debe ser mayor que 0.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                $(".preload").removeClass('hidden');

                var mat_datos = {
                    presupuesto: $("#totalFondoSalario").val(),
                    idPlanEstimado: {{ app.session.get('idPlanEstimado') }}
                };
                $.ajax({
                    type: "POST",
                    dataType: "html",
                    url: '{{ path("insertTotalFondoSalario") }}',
                    data: mat_datos
                }).done(function (data) {

                    $(".preload").addClass('hidden');
                    if (data === 'ok') {

                        alertify.alert('<strong>Se asignó el presupuesto estimado de recursos humanos correctamente</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ok-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Confirmación</h4>')
                            .set('label', 'Aceptar')
                            .set('onok', function () {
                                window.location.href = "{{ path('gestionarPlanesEstimados') }}";
                            });
                    } else {
                        alertify.alert('<strong>' + data + '</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                            .set('label', 'Aceptar')
                    }
                });

            });

            $('.ModificarFondoSalario').on('click', function () {

                //Validaciones
                if ($("#totalFondoSalario").val() === '') {
                    alertify.alert('<strong>El total de presupuesto es obligatorio, no puede quedar en blanco.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                //Validaciones
                if ($("#totalFondoSalario").val() === '0') {
                    alertify.alert('<strong>El total de presupuesto debe ser mayor que 0.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                $(".preload").removeClass('hidden');

                var mat_datos = {
                    presupuesto: $("#totalFondoSalario").val(),
                    idPlanEstimado: {{ app.session.get('idPlanEstimado') }}
                };
                $.ajax({
                    type: "POST",
                    dataType: "html",
                    url: '{{ path("updateTotalFondoSalario") }}',
                    data: mat_datos
                }).done(function (data) {

                    $(".preload").addClass('hidden');
                    if (data === 'ok') {

                        alertify.alert('<strong>Se modificó el total del presupuesto estimado de recursos humanos</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ok-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Confirmación</h4>')
                            .set('label', 'Aceptar')
                            .set('onok', function () {
                                window.location.href = "{{ path('gestionarPlanesEstimados') }}";
                            });
                    } else {
                        alertify.alert('<strong>' + data + '</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                            .set('label', 'Aceptar')
                    }
                });

            });

            $('.AprobarFondoSalario').on('click', function () {

                alertify.confirm('Basic: false').set('message', '<strong>Seguro que desea aprobar el total del presupuesto estimado de recursos humanos</strong>').set('onok', function () {

                    $(".preload").removeClass('hidden');

                    var mat_datos = {
                        idPlanEstimado: {{ app.session.get('idPlanEstimado') }}
                    };
                    $.ajax({
                        type: "POST",
                        dataType: "html",
                        url: '{{ path("aprobarTotalFondoSalario") }}',
                        data: mat_datos
                    }).done(function (data) {

                        $(".preload").addClass('hidden');
                        if (data === 'ok') {

                            alertify.alert('<strong>Se aprobó el total del presupuesto estimado de recursos humanos</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ok-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Confirmación</h4>')
                                .set('label', 'Aceptar')
                                .set('onok', function () {
                                    window.location.href = "{{ path('gestionarPlanesEstimados') }}";
                                });
                        } else {
                            alertify.alert('<strong>' + data + '</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                                .set('label', 'Aceptar')
                        }
                    });
                });

            });

            //Fin de las funciones del fondo salario

            //Funciones para gestionar el presupuesto de Otros gastos Monetarios

            function cargarTotalOtrosGastos(presupuesto, colorSeleccionado) {

                $('#totalOtrosGastos').val(presupuesto);
                $('.AsignarOtrosGastos').prop("disabled", true);
                $('.ModificarOtrosGastos').prop("disabled", false);
                $('.AprobarOtrosGastos').prop("disabled", false);

            }

            function graficoTotalOtrosGastos() {
                var valorMax = totalEstimadoOtrosGastos.length - 1;
                var valorScrollbar = false;
                if (totalEstimadoOtrosGastos.length > 6) {
                    valorMax = 5;
                    valorScrollbar = true;
                }
                Highcharts.chart('graficoOtrosGastosYear', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: 'DISTRIBUCIÓN DEL PRESUPUESTO'
                    },
                    exporting: {
                        enabled: false
                    },
                    scrollbar: {
                        enabled: valorScrollbar,
                        liveRedraw: true,
                        step: 1
                    },
                    xAxis: {
                        type: 'category',
                        min: 0,
                        max: valorMax,
                        useHTML: true
                    },
                    yAxis: {
                        title: {
                            text: 'Presupuesto Estimado',
                            useHTML: true
                        }

                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            borderWidth: 0,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            getExtremesFromAll: true,
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return Highcharts.numberFormat(this.y, 0, ',', '.');
                                }
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                        pointFormat: '<span style="color:{point.color}">{point.name}</span>' + ' presupuesto asignado ' + '<b>{point.y:,.0f}</b>'
                    },

                    "series": [
                        {
                            "name": "Años",
                            "colorByPoint": true,
                            "data": totalEstimadoOtrosGastos,
                            events: {
                                click: function (oEvent) {
                                    cargarTotalOtrosGastos(oEvent.point.y, oEvent.point.color);
                                }
                            }
                        }
                    ],
                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 500
                            },
                            chartOptions: {
                                scrollbar: {
                                    enabled: true
                                },
                                xAxis: {
                                    min: 0,
                                    max: 1,
                                    useHTML: true
                                }
                            }
                        }]
                    }
                });
            }

            $('.AsignarOtrosGastos').on('click', function () {

                //Validaciones
                if ($("#totalOtrosGastos").val() === '') {
                    alertify.alert('<strong>El total de presupuesto es obligatorio, no puede quedar en blanco.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                //Validaciones
                if ($("#totalOtrosGastos").val() === '0') {
                    alertify.alert('<strong>El total de presupuesto debe ser mayor que 0.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                $(".preload").removeClass('hidden');

                var mat_datos = {
                    presupuesto: $("#totalOtrosGastos").val(),
                    idPlanEstimado: {{ app.session.get('idPlanEstimado') }}
                };
                $.ajax({
                    type: "POST",
                    dataType: "html",
                    url: '{{ path("insertTotalOtroGastos") }}',
                    data: mat_datos
                }).done(function (data) {

                    $(".preload").addClass('hidden');
                    if (data === 'ok') {

                        alertify.alert('<strong>Se asignó el presupuesto estimado de otros gastos monetarios correctamente</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ok-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Confirmación</h4>')
                            .set('label', 'Aceptar')
                            .set('onok', function () {
                                window.location.href = "{{ path('gestionarPlanesEstimados') }}";
                            });
                    } else {
                        alertify.alert('<strong>' + data + '</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                            .set('label', 'Aceptar')
                    }
                });

            });

            $('.ModificarOtrosGastos').on('click', function () {

                //Validaciones
                if ($("#totalOtrosGastos").val() === '') {
                    alertify.alert('<strong>El total de presupuesto es obligatorio, no puede quedar en blanco.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                //Validaciones
                if ($("#totalOtrosGastos").val() === '0') {
                    alertify.alert('<strong>El total de presupuesto debe ser mayor que 0.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                $(".preload").removeClass('hidden');

                var mat_datos = {
                    presupuesto: $("#totalOtrosGastos").val(),
                    idPlanEstimado: {{ app.session.get('idPlanEstimado') }}
                };
                $.ajax({
                    type: "POST",
                    dataType: "html",
                    url: '{{ path("updateTotalOtroGastos") }}',
                    data: mat_datos
                }).done(function (data) {

                    $(".preload").addClass('hidden');
                    if (data === 'ok') {

                        alertify.alert('<strong>Se modificó el total del presupuesto estimado de otros gastos monetarios</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ok-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Confirmación</h4>')
                            .set('label', 'Aceptar')
                            .set('onok', function () {
                                window.location.href = "{{ path('gestionarPlanesEstimados') }}";
                            });
                    } else {
                        alertify.alert('<strong>' + data + '</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                            .set('label', 'Aceptar')
                    }
                });

            });

            $('.AprobarOtrosGastos').on('click', function () {

                alertify.confirm('Basic: false').set('message', '<strong>Seguro que desea aprobar el total del presupuesto estimado de otros gastos</strong>').set('onok', function () {

                    $(".preload").removeClass('hidden');

                    var mat_datos = {
                        idPlanEstimado: {{ app.session.get('idPlanEstimado') }}
                    };
                    $.ajax({
                        type: "POST",
                        dataType: "html",
                        url: '{{ path("aprobarTotalOtroGastos") }}',
                        data: mat_datos
                    }).done(function (data) {

                        $(".preload").addClass('hidden');
                        if (data === 'ok') {

                            alertify.alert('<strong>Se aprobó el total del presupuesto estimado de otros gastos</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ok-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Confirmación</h4>')
                                .set('label', 'Aceptar')
                                .set('onok', function () {
                                    window.location.href = "{{ path('gestionarPlanesEstimados') }}";
                                });
                        } else {
                            alertify.alert('<strong>' + data + '</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                                .set('label', 'Aceptar')
                        }
                    });
                });

            });

            //Fin de las funciones del presupuesto de Otros gastos Monetarios

            //Funciones para gestionar la cantidad de litros de cada tipo de combustible

            $('#tipoCombustible').on('change', function () {
                var html = '';
                var tipoCombustible = $('#tipoCombustible').val();
                if (tipoCombustible === '0') {
                    $("#totalCombustible").prop('disabled', true);
                    $("#totalCombustible").val('');
                } else {
                    $("#totalCombustible").prop('disabled', false);
                }
            });

            $('#totalCombustible').on("keyup", function () {
                if ($('.ModificarCombustible').prop("disabled")) {
                    if ($(this).val().trim() != '') {
                        $('.AsignarCombustible').prop("disabled", false);

                    } else {
                        $('.AsignarCombustible').prop("disabled", true);
                    }
                }
            });

            function cargarTotalCombustible(categoria, presupuesto) {
                tipo = 0;
                ltsAnterior = presupuesto;
                {% for tipo in tiposCombustiblesPrecios %}
                    var tipoCombustibleName = '{{ tipo.nombre }}';
                    if (tipoCombustibleName === categoria) {
                        $('#tipoCombustible').val({{ tipo.id }});
                        tipoCombustible = {{ tipo.id }};
                    }
                {% endfor %}
                //mostrar el total del presupuesto

                $('#totalCombustible').val(presupuesto);
                $('#totalCombustible').prop("disabled", false);
                $('.AsignarCombustible').prop("disabled", true);
                $('.ModificarCombustible').prop("disabled", false);
                $('.AprobarCombustible').prop("disabled", true);

            }

            function graficoTipoCombustible() {
                var valorMax = totalEstimadoCombustibleLitros.length - 1;
                var valorScrollbar = false;
                if (totalEstimadoCombustibleLitros.length > 6) {
                    valorMax = 5;
                    valorScrollbar = true;
                }
                Highcharts.chart('graficoCombustibleYear', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: null
                    },
                    exporting: {
                        enabled: false
                    },
                    scrollbar: {
                        enabled: valorScrollbar,
                        liveRedraw: true,
                        step: 1
                    },
                    xAxis: {
                        categories: nameTipoCombustible,
                        min: 0,
                        max: valorMax,
                        useHTML: true
                    },
                    yAxis: {
                        title: {
                            text: 'Litros estimados',
                            align: 'middle',
                            useHTML: true
                        },
                        stackLabels: {
                            enabled: true,
                            style: {
                                fontWeight: 'bold'
                            }
                        }
                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        column: {
                            stacking: 'percent',
                            dataLabels: {
                                enabled: true
                            }
                        },
                        series: {
                            borderWidth: 0,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return Highcharts.numberFormat(this.y, 0, '.', ',');
                                }
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:11px"><b>{point.x}</b></span><br>',
                        pointFormat: '<span style="color:{point.color}">{series.name}</span>: <b>{point.y:,.0f}</b>'
                    },

                    "series": [
                        {
                            "name": "Total de litros",
                            "data": totalEstimadoCombustibleLitros,
                            events: {
                                click: function (oEvent) {
                                    cargarTotalCombustible(oEvent.point.category, oEvent.point.y);
                                }
                            }
                        }
                    ],
                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 800
                            },
                            chartOptions: {
                                scrollbar: {
                                    enabled: true
                                },
                                xAxis: {
                                    min: 0,
                                    max: 1,
                                    useHTML: true
                                }
                            }
                        }]
                    }
                });
            }

            $('.AsignarCombustible').on('click', function () {

                //Validaciones
                if ($("#tipoCombustible").val() === '0') {
                    alertify.alert('<strong>El tipo de combustible es obligatorio, no puede quedar en blanco.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                if ($("#totalCombustible").val() === '') {
                    alertify.alert('<strong>El total de litros es obligatorio, no puede quedar en blanco.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                //Validaciones
                if ($("#totalCombustible").val() === '0') {
                    alertify.alert('<strong>El total de litros debe ser mayor que 0.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                $(".preload").removeClass('hidden');

                //si tipo es 0 van los datos de combustible sino los de lubricante
                var mat_datos = {
                    tipoCombustible: $("#tipoCombustible").val(),
                    lts: $("#totalCombustible").val(),
                    idPlanEstimado: {{ app.session.get('idPlanEstimado') }}
                };
                $.ajax({
                    type: "POST",
                    dataType: "html",
                    url: '{{ path("insertTotalCombustible") }}',
                    data: mat_datos
                }).done(function (data) {

                    $(".preload").addClass('hidden');
                    if (data === 'ok') {

                        alertify.alert('<strong>Se asignó la cantidad de litros de este tipo de combustible correctamente</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ok-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Confirmación</h4>')
                            .set('label', 'Aceptar')
                            .set('onok', function () {
                                window.location.href = "{{ path('gestionarPlanesEstimados') }}";
                            });
                    } else {
                        alertify.alert('<strong>' + data + '</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                            .set('label', 'Aceptar')
                    }
                });

            });

            $('.ModificarCombustible').on('click', function () {

                //Validaciones
                 if ($("#tipoCombustible").val() === '0') {
                    alertify.alert('<strong>El tipo de combustible es obligatorio, no puede quedar en blanco.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                if ($("#totalCombustible").val() === '') {
                    alertify.alert('<strong>El total de litros es obligatorio, no puede quedar en blanco.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                //Validaciones
                if ($("#totalCombustible").val() === '0') {
                    alertify.alert('<strong>El total de litros debe ser mayor que 0.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }


                $(".preload").removeClass('hidden');

                var mat_datos = {
                    tipoCombustible: $("#tipoCombustible").val(),
                    ltsAnterior: ltsAnterior,
                    lts: $("#totalCombustible").val(),
                    idPlanEstimado: {{ app.session.get('idPlanEstimado') }}
                };
                $.ajax({
                    type: "POST",
                    dataType: "html",
                    url: '{{ path("updateTotalCombustible") }}',
                    data: mat_datos
                }).done(function (data) {

                    $(".preload").addClass('hidden');
                    if (data === 'ok') {

                        alertify.alert('<strong>Se modificó la cantidad de litros de este tipo de combustible correctamente</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ok-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Confirmación</h4>')
                            .set('label', 'Aceptar')
                            .set('onok', function () {
                                window.location.href = "{{ path('gestionarPlanesEstimados') }}";
                            });
                    } else {
                        alertify.alert('<strong>' + data + '</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                            .set('label', 'Aceptar')
                    }
                });

            });

            $('.AprobarCombustible').on('click', function () {

                alertify.confirm('Basic: false').set('message', '<strong>Seguro que desea aprobar el total de litros estimados para el combustible</strong>').set('onok', function () {

                    $(".preload").removeClass('hidden');

                    var mat_datos = {
                        idPlanEstimado: {{ app.session.get('idPlanEstimado') }}
                    };
                    $.ajax({
                        type: "POST",
                        dataType: "html",
                        url: '{{ path("aprobarTotalCombustible") }}',
                        data: mat_datos
                    }).done(function (data) {

                        $(".preload").addClass('hidden');
                        if (data === 'ok') {

                            alertify.alert('<strong>Se aprobó el total de litros para el combustible</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ok-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Confirmación</h4>')
                                .set('label', 'Aceptar')
                                .set('onok', function () {
                                    window.location.href = "{{ path('gestionarPlanesEstimados') }}";
                                });
                        } else {
                            alertify.alert('<strong>' + data + '</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                                .set('label', 'Aceptar')
                        }
                    });
                });

            });

            //Fin de las funciones para gestionar la cantidad de litros de cada tipo de combustible

            //Funciones para gestionar la cantidad de litros de aceite

            $('#tipoLubricante').on('change', function () {
                var html = '';
                var tipoLubricante = $('#tipoLubricante').val();
                if (tipoLubricante === '0') {
                    $("#totalLubricante").prop('disabled', true);
                    $("#totalLubricante").val('');
                } else {
                    $("#totalLubricante").prop('disabled', false);
                }
            });

            $('#totalLubricante').on("keyup", function () {
                if ($('.ModificarLubricante').prop("disabled")) {
                    if ($(this).val().trim() != '') {
                        $('.AsignarLubricante').prop("disabled", false);

                    } else {
                        $('.AsignarLubricante').prop("disabled", true);
                    }
                }
            });

            function cargarTotalLubricante(categoria, presupuesto) {
                tipo = 0;
                ltsAnterior = presupuesto;
                {% for tipo in tiposLubricantesPrecios %}
                       tipoCombustible = {{ tipo.id }};
                {% endfor %}

                //mostrar el total de  litros

                $('#totalLubricante').val(presupuesto);
                $('#totalLubricante').prop("disabled", false);
                $('.AsignarLubricante').prop("disabled", true);
                $('.ModificarLubricante').prop("disabled", false);
                $('.AprobarLubricante').prop("disabled", true);

            }

            function graficoTipoLubricante() {
                var valorMax = totalEstimadoLubricanteLitros.length - 1;
                var valorScrollbar = false;
                if (totalEstimadoLubricanteLitros.length > 6) {
                    valorMax = 5;
                    valorScrollbar = true;
                }
                Highcharts.chart('graficoLubricanteYear', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: null
                    },
                    exporting: {
                        enabled: false
                    },
                    scrollbar: {
                        enabled: valorScrollbar,
                        liveRedraw: true,
                        step: 1
                    },
                    xAxis: {
                        categories: nameTipoLubricante,
                        min: 0,
                        max: valorMax,
                        useHTML: true
                    },
                    yAxis: {
                        title: {
                            text: 'Litros estimados',
                            align: 'middle',
                            useHTML: true
                        },
                        stackLabels: {
                            enabled: true,
                            style: {
                                fontWeight: 'bold'
                            }
                        }
                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        column: {
                            stacking: 'percent',
                            dataLabels: {
                                enabled: true
                            }
                        },
                        series: {
                            borderWidth: 0,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return Highcharts.numberFormat(this.y, 0, '.', ',');
                                }
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:11px"><b>{point.x}</b></span><br>',
                        pointFormat: '<span style="color:{point.color}">{series.name}</span>: <b>{point.y:,.0f}</b>'
                    },

                    "series": [
                        {
                            "name": "Total de litros",
                            "data": totalEstimadoLubricanteLitros,
                            events: {
                                click: function (oEvent) {
                                    cargarTotalLubricante(oEvent.point.category, oEvent.point.y);
                                }
                            }
                        }
                    ],
                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 800
                            },
                            chartOptions: {
                                scrollbar: {
                                    enabled: true
                                },
                                xAxis: {
                                    min: 0,
                                    max: 1,
                                    useHTML: true
                                }
                            }
                        }]
                    }
                });
            }

            $('.AsignarLubricante').on('click', function () {

                //Validaciones
                if ($("#tipoLubricante").val() === '0') {
                    alertify.alert('<strong>El tipo de aceite es obligatorio, no puede quedar en blanco.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                if ($("#totalLubricante").val() === '') {
                    alertify.alert('<strong>El total de litros es obligatorio, no puede quedar en blanco.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                //Validaciones
                if ($("#totalLubricante").val() === '0') {
                    alertify.alert('<strong>El total de litros debe ser mayor que 0.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                $(".preload").removeClass('hidden');

                //si tipo es 0 van los datos de combustible sino los de lubricante
                var mat_datos = {
                    tipoLubricante: $("#tipoLubricante").val(),
                    lts: $("#totalLubricante").val(),
                    idPlanEstimado: {{ app.session.get('idPlanEstimado') }}
                };
                $.ajax({
                    type: "POST",
                    dataType: "html",
                    url: '{{ path("insertTotalLubricante") }}',
                    data: mat_datos
                }).done(function (data) {

                    $(".preload").addClass('hidden');
                    if (data === 'ok') {

                        alertify.alert('<strong>Se asignó la cantidad de litros de aceites y lubricantes</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ok-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Confirmación</h4>')
                            .set('label', 'Aceptar')
                            .set('onok', function () {
                                window.location.href = "{{ path('gestionarPlanesEstimados') }}";
                            });
                    } else {
                        alertify.alert('<strong>' + data + '</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                            .set('label', 'Aceptar')
                    }
                });

            });

            $('.ModificarLubricante').on('click', function () {

                //Validaciones
                 if ($("#tipoLubricante").val() === '0') {
                    alertify.alert('<strong>El tipo de aceite es obligatorio no puede quedar en blanco.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                if ($("#totalLubricante").val() === '') {
                    alertify.alert('<strong>El total de litros es obligatorio, no puede quedar en blanco.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                //Validaciones
                if ($("#totalLubricante").val() === '0') {
                    alertify.alert('<strong>El total de litros debe ser mayor que 0.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                $(".preload").removeClass('hidden');

                var mat_datos = {
                    tipoLubricante: $("#tipoLubricante").val(),
                    ltsAnterior: ltsAnterior,
                    lts: $("#totalLubricante").val(),
                    idPlanEstimado: {{ app.session.get('idPlanEstimado') }}
                };
                $.ajax({
                    type: "POST",
                    dataType: "html",
                    url: '{{ path("updateTotalLubricante") }}',
                    data: mat_datos
                }).done(function (data) {

                    $(".preload").addClass('hidden');
                    if (data === 'ok') {

                        alertify.alert('<strong>Se modificó la cantidad de litros de aceites y lubricantes</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ok-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Confirmación</h4>')
                            .set('label', 'Aceptar')
                            .set('onok', function () {
                                window.location.href = "{{ path('gestionarPlanesEstimados') }}";
                            });
                    } else {
                        alertify.alert('<strong>' + data + '</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                            .set('label', 'Aceptar')
                    }
                });

            });

            $('.AprobarLubricante').on('click', function () {

                alertify.confirm('Basic: false').set('message', '<strong>Seguro que desea aprobar el total de litros estimados para el aceite</strong>').set('onok', function () {

                    $(".preload").removeClass('hidden');

                    var mat_datos = {
                        idPlanEstimado: {{ app.session.get('idPlanEstimado') }}
                    };
                    $.ajax({
                        type: "POST",
                        dataType: "html",
                        url: '{{ path("aprobarTotalLubricante") }}',
                        data: mat_datos
                    }).done(function (data) {

                        $(".preload").addClass('hidden');
                        if (data === 'ok') {

                            alertify.alert('<strong>Se aprobó el total de litros para el aceite</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ok-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Confirmación</h4>')
                                .set('label', 'Aceptar')
                                .set('onok', function () {
                                    window.location.href = "{{ path('gestionarPlanesEstimados') }}";
                                });
                        } else {
                            alertify.alert('<strong>' + data + '</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                                .set('label', 'Aceptar')
                        }
                    });
                });

            });

            //Fin de las funciones para gestionar la cantidad de litros de aceite

            //Funciones para gestionar el presupuesto de energia

            $('#totalEnergia').on("keyup", function () {
                if ($('.ModificarEnergia').prop("disabled")) {
                    if ($(this).val().trim() != '') {
                        $('.AsignarEnergia').prop("disabled", false);

                    } else {
                        $('.AsignarEnergia').prop("disabled", true);
                    }
                }
            });

            function cargarTotalKW(presupuesto, colorSeleccionado) {

                $('#totalEnergia').val(presupuesto);
                $('.AsignarCombustible').prop("disabled", true);
                $('.ModificarCombustible').prop("disabled", false);
                $('.AprobarCombustible').prop("disabled", false);

            }

            function graficoTotalKW() {
                var valorMax = totalEstimadoEnergia.length - 1;
                var valorScrollbar = false;
                if (totalEstimadoEnergia.length > 6) {
                    valorMax = 5;
                    valorScrollbar = true;
                }
                Highcharts.chart('graficoEnergiaYear', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: 'TOTAL DE KW'
                    },
                    exporting: {
                        enabled: false
                    },
                    scrollbar: {
                        enabled: valorScrollbar,
                        liveRedraw: true,
                        step: 1
                    },
                    xAxis: {
                        type: 'category',
                        min: 0,
                        max: valorMax,
                        useHTML: true
                    },
                    yAxis: {
                        title: {
                            text: 'Total de kW',
                            useHTML: true
                        }

                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            borderWidth: 0,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            getExtremesFromAll: true,
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return Highcharts.numberFormat(this.y, 2, '.', ',');
                                }
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                        pointFormat: '<span style="color:{point.color}">{point.name}</span>' + ' kW asignados ' + '<b>{point.y:,.2f}</b>'
                    },

                    "series": [
                        {
                            "name": "Años",
                            "colorByPoint": true,
                            "data": totalEstimadoEnergia,
                            events: {
                                click: function (oEvent) {
                                    cargarTotalKW(oEvent.point.y, oEvent.point.color);
                                }
                            }
                        }
                    ],
                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 500
                            },
                            chartOptions: {
                                scrollbar: {
                                    enabled: true
                                },
                                xAxis: {
                                    min: 0,
                                    max: 1,
                                    useHTML: true
                                }
                            }
                        }]
                    }
                });
            }

            $('.AsignarEnergia').on('click', function () {

                //Validaciones
                if ($("#totalEnergia").val() === '') {
                    alertify.alert('<strong>El total de kW es obligatorio, no puede quedar en blanco.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                //Validaciones
                if ($("#totalEnergia").val() === '0') {
                    alertify.alert('<strong>El total de kW debe ser mayor que 0.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                $(".preload").removeClass('hidden');

                var mat_datos = {
                    kW: parseInt($("#totalEnergia").val()),
                    idPlanEstimado: {{ app.session.get('idPlanEstimado') }}
                };
                $.ajax({
                    type: "POST",
                    dataType: "html",
                    url: '{{ path("insertTotalEnergia") }}',
                    data: mat_datos
                }).done(function (data) {

                    $(".preload").addClass('hidden');
                    if (data === 'ok') {

                        alertify.alert('<strong>Se asignó el total de kW estimado para el consumo de energía correctamente</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ok-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Confirmación</h4>')
                            .set('label', 'Aceptar')
                            .set('onok', function () {
                                window.location.href = "{{ path('gestionarPlanesEstimados') }}";
                            });
                    } else {
                        alertify.alert('<strong>' + data + '</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                            .set('label', 'Aceptar')
                    }
                });

            });

            $('.ModificarEnergia').on('click', function () {

                //Validaciones
                if ($("#totalEnergia").val() === '') {
                    alertify.alert('<strong>El total de kW es obligatorio, no puede quedar en blanco.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                $(".preload").removeClass('hidden');

               var mat_datos = {
                    kW: parseInt($("#totalEnergia").val()),
                    idPlanEstimado: {{ app.session.get('idPlanEstimado') }}
                };
                $.ajax({
                    type: "POST",
                    dataType: "html",
                    url: '{{ path("updateTotalEnergia") }}',
                    data: mat_datos
                }).done(function (data) {

                    $(".preload").addClass('hidden');
                    if (data === 'ok') {

                        alertify.alert('<strong>Se modificó el total de kW estimado para el consumo de energía correctamente</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ok-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Confirmación</h4>')
                            .set('label', 'Aceptar')
                            .set('onok', function () {
                                window.location.href = "{{ path('gestionarPlanesEstimados') }}";
                            });
                    } else {
                        alertify.alert('<strong>' + data + '</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                            .set('label', 'Aceptar')
                    }
                });

            });

            $('.AprobarEnergia').on('click', function () {

                alertify.confirm('Basic: false').set('message', '<strong>Seguro que desea aprobar el total de kW estimado para el consumo de energía</strong>').set('onok', function () {

                    $(".preload").removeClass('hidden');

                    var mat_datos = {
                        idPlanEstimado: {{ app.session.get('idPlanEstimado') }}
                    };
                    $.ajax({
                        type: "POST",
                        dataType: "html",
                        url: '{{ path("aprobarTotalEnergia") }}',
                        data: mat_datos
                    }).done(function (data) {

                        $(".preload").addClass('hidden');
                        if (data === 'ok') {

                            alertify.alert('<strong>Se aprobó el total del presupuesto estimado para el consumo de energía</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ok-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Confirmación</h4>')
                                .set('label', 'Aceptar')
                                .set('onok', function () {
                                    window.location.href = "{{ path('gestionarPlanesEstimados') }}";
                                });
                        } else {
                            alertify.alert('<strong>' + data + '</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                                .set('label', 'Aceptar')
                        }
                    });
                });

            });

            //Fin de las funciones del presupuesto de energia

            //Funciones para gestionar el presupuesto de Materias Primas

            function cargarTotalMateriasPrimas(presupuesto, colorSeleccionado) {

                $('#totalMateriaPrima').val(presupuesto);
                $('.AsignarMateriaPrima').prop("disabled", true);
                $('.ModificarMateriaPrima').prop("disabled", false);
                $('.AprobarMateriaPrima').prop("disabled", false);

            }

            function graficoTotalMateriaPrima() {
                var valorMax = totalEstimadoMateriasPrimas.length - 1;
                var valorScrollbar = false;
                if (totalEstimadoMateriasPrimas.length > 6) {
                    valorMax = 5;
                    valorScrollbar = true;
                }
                Highcharts.chart('graficoMateriaPrimaYear', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: 'DISTRIBUCIÓN DEL PRESUPUESTO'
                    },
                    exporting: {
                        enabled: false
                    },
                    scrollbar: {
                        enabled: valorScrollbar,
                        liveRedraw: true,
                        step: 1
                    },
                    xAxis: {
                        type: 'category',
                        min: 0,
                        max: valorMax,
                        useHTML: true
                    },
                    yAxis: {
                        title: {
                            text: 'Presupuesto Estimado',
                            useHTML: true
                        }

                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            borderWidth: 0,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            getExtremesFromAll: true,
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return Highcharts.numberFormat(this.y, 0, ',', '.');
                                }
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                        pointFormat: '<span style="color:{point.color}">{point.name}</span>' + ' presupuesto asignado ' + '<b>{point.y:,.0f}</b>'
                    },

                    "series": [
                        {
                            "name": "Años",
                            "colorByPoint": true,
                            "data": totalEstimadoMateriasPrimas,
                            events: {
                                click: function (oEvent) {
                                    cargarTotalMateriasPrimas(oEvent.point.y, oEvent.point.color);
                                }
                            }
                        }
                    ],
                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 800
                            },
                            chartOptions: {
                                scrollbar: {
                                    enabled: true
                                },
                                xAxis: {
                                    min: 0,
                                    max: 1,
                                    useHTML: true
                                }
                            }
                        }]
                    }
                });
            }

            $('.AsignarMateriaPrima').on('click', function () {

                //Validaciones
                if ($("#totalMateriaPrima").val() === '') {
                    alertify.alert('<strong>El total de presupuesto es obligatorio, no puede quedar en blanco.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                //Validaciones
                if ($("#totalMateriaPrima").val() === '0') {
                    alertify.alert('<strong>El total de presupuesto debe ser mayor que 0.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                $(".preload").removeClass('hidden');

                var mat_datos = {
                    presupuesto: $("#totalMateriaPrima").val(),
                    idPlanEstimado: {{ app.session.get('idPlanEstimado') }}
                };
                $.ajax({
                    type: "POST",
                    dataType: "html",
                    url: '{{ path("insertTotalMateriaPrima") }}',
                    data: mat_datos
                }).done(function (data) {

                    $(".preload").addClass('hidden');
                    if (data === 'ok') {

                        alertify.alert('<strong>Se asignó el presupuesto estimado de materias primas correctamente</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ok-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Confirmación</h4>')
                            .set('label', 'Aceptar')
                            .set('onok', function () {
                                window.location.href = "{{ path('gestionarPlanesEstimados') }}";
                            });
                    } else {
                        alertify.alert('<strong>' + data + '</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                            .set('label', 'Aceptar')
                    }
                });

            });

            $('.ModificarMateriaPrima').on('click', function () {

                //Validaciones
                if ($("#totalMateriaPrima").val() === '') {
                    alertify.alert('<strong>El total de presupuesto es obligatorio, no puede quedar en blanco.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                //Validaciones
                if ($("#totalMateriaPrima").val() === '0') {
                    alertify.alert('<strong>El total de presupuesto debe ser mayor que 0.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                $(".preload").removeClass('hidden');

                var mat_datos = {
                    presupuesto: $("#totalMateriaPrima").val(),
                    idPlanEstimado: {{ app.session.get('idPlanEstimado') }}
                };
                $.ajax({
                    type: "POST",
                    dataType: "html",
                    url: '{{ path("updateTotalMateriaPrima") }}',
                    data: mat_datos
                }).done(function (data) {

                    $(".preload").addClass('hidden');
                    if (data === 'ok') {

                        alertify.alert('<strong>Se modificó el total del presupuesto estimado de materias primas</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ok-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Confirmación</h4>')
                            .set('label', 'Aceptar')
                            .set('onok', function () {
                                window.location.href = "{{ path('gestionarPlanesEstimados') }}";
                            });
                    } else {
                        alertify.alert('<strong>' + data + '</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                            .set('label', 'Aceptar')
                    }
                });

            });

            $('.AprobarMateriaPrima').on('click', function () {

                alertify.confirm('Basic: false').set('message', '<strong>Seguro que desea aprobar el total del presupuesto estimado de materias primas</strong>').set('onok', function () {

                    $(".preload").removeClass('hidden');

                    var mat_datos = {
                        idPlanEstimado: {{ app.session.get('idPlanEstimado') }}
                    };
                    $.ajax({
                        type: "POST",
                        dataType: "html",
                        url: '{{ path("aprobarTotalMateriaPrima") }}',
                        data: mat_datos
                    }).done(function (data) {

                        $(".preload").addClass('hidden');
                        if (data === 'ok') {

                            alertify.alert('<strong>Se aprobó el total del presupuesto estimado de materias primas</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ok-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Confirmación</h4>')
                                .set('label', 'Aceptar')
                                .set('onok', function () {
                                    window.location.href = "{{ path('gestionarPlanesEstimados') }}";
                                });
                        } else {
                            alertify.alert('<strong>' + data + '</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                                .set('label', 'Aceptar')
                        }
                    });
                });

            });

            //Fin de las funciones del presupuesto de Materias Primas

            //Funciones para gestionar el presupuesto de Depreciación

            function cargarTotalDepreciacion(presupuesto, colorSeleccionado) {

                $('#totalDepreciacion').val(presupuesto);
                $('.AsignarDepreciacion').prop("disabled", true);
                $('.ModificarDepreciacion').prop("disabled", false);
                $('.AprobarDepreciacion').prop("disabled", false);

            }

            function graficoTotalDepreciacion() {
                var valorMax = totalEstimadoDepreciacion.length - 1;
                var valorScrollbar = false;
                if (totalEstimadoDepreciacion.length > 6) {
                    valorMax = 5;
                    valorScrollbar = true;
                }
                Highcharts.chart('graficoDepreciacionYear', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: 'DISTRIBUCIÓN DEL PRESUPUESTO'
                    },
                    exporting: {
                        enabled: false
                    },
                    scrollbar: {
                        enabled: valorScrollbar,
                        liveRedraw: true,
                        step: 1
                    },
                    xAxis: {
                        type: 'category',
                        min: 0,
                        max: valorMax,
                        useHTML: true
                    },
                    yAxis: {
                        title: {
                            text: 'Presupuesto Estimado',
                            useHTML: true
                        }

                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            borderWidth: 0,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            getExtremesFromAll: true,
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return Highcharts.numberFormat(this.y, 0, ',', '.');
                                }
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                        pointFormat: '<span style="color:{point.color}">{point.name}</span>' + ' presupuesto asignado ' + '<b>{point.y:,.0f}</b>'
                    },

                    "series": [
                        {
                            "name": "Años",
                            "colorByPoint": true,
                            "data": totalEstimadoDepreciacion,
                            events: {
                                click: function (oEvent) {
                                    cargarTotalDepreciacion(oEvent.point.y, oEvent.point.color);
                                }
                            }
                        }
                    ],
                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 800
                            },
                            chartOptions: {
                                scrollbar: {
                                    enabled: true
                                },
                                xAxis: {
                                    min: 0,
                                    max: 1,
                                    useHTML: true
                                }
                            }
                        }]
                    }
                });
            }

            $('.AsignarDepreciacion').on('click', function () {

                //Validaciones
                if ($("#totalDepreciacion").val() === '') {
                    alertify.alert('<strong>El total de presupuesto es obligatorio, no puede quedar en blanco.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                //Validaciones
                if ($("#totalDepreciacion").val() === '0') {
                    alertify.alert('<strong>El total de presupuesto debe ser mayor que 0.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                $(".preload").removeClass('hidden');

                var mat_datos = {
                    presupuesto: $("#totalDepreciacion").val(),
                    idPlanEstimado: {{ app.session.get('idPlanEstimado') }}
                };
                $.ajax({
                    type: "POST",
                    dataType: "html",
                    url: '{{ path("insertTotalDepreciacion") }}',
                    data: mat_datos
                }).done(function (data) {

                    $(".preload").addClass('hidden');
                    if (data === 'ok') {

                        alertify.alert('<strong>Se asignó el presupuesto estimado de depreciación correctamente</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ok-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Confirmación</h4>')
                            .set('label', 'Aceptar')
                            .set('onok', function () {
                                window.location.href = "{{ path('gestionarPlanesEstimados') }}";
                            });
                    } else {
                        alertify.alert('<strong>' + data + '</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                            .set('label', 'Aceptar')
                    }
                });

            });

            $('.ModificarDepreciacion').on('click', function () {

                //Validaciones
                if ($("#totalDepreciacion").val() === '') {
                    alertify.alert('<strong>El total de presupuesto es obligatorio, no puede quedar en blanco.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                //Validaciones
                if ($("#totalDepreciacion").val() === '0') {
                    alertify.alert('<strong>El total de presupuesto debe ser mayor que 0.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                $(".preload").removeClass('hidden');

                var mat_datos = {
                    presupuesto: $("#totalDepreciacion").val(),
                    idPlanEstimado: {{ app.session.get('idPlanEstimado') }}
                };
                $.ajax({
                    type: "POST",
                    dataType: "html",
                    url: '{{ path("updateTotalDepreciacion") }}',
                    data: mat_datos
                }).done(function (data) {

                    $(".preload").addClass('hidden');
                    if (data === 'ok') {

                        alertify.alert('<strong>Se modificó el total del presupuesto estimado de depreciación</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ok-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Confirmación</h4>')
                            .set('label', 'Aceptar')
                            .set('onok', function () {
                                window.location.href = "{{ path('gestionarPlanesEstimados') }}";
                            });
                    } else {
                        alertify.alert('<strong>' + data + '</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                            .set('label', 'Aceptar')
                    }
                });

            });

            $('.AprobarDepreciacion').on('click', function () {

                alertify.confirm('Basic: false').set('message', '<strong>Seguro que desea aprobar el total del presupuesto estimado de depreciación</strong>').set('onok', function () {

                    $(".preload").removeClass('hidden');

                    var mat_datos = {
                        idPlanEstimado: {{ app.session.get('idPlanEstimado') }}
                    };
                    $.ajax({
                        type: "POST",
                        dataType: "html",
                        url: '{{ path("aprobarTotalDepreciacion") }}',
                        data: mat_datos
                    }).done(function (data) {

                        $(".preload").addClass('hidden');
                        if (data === 'ok') {

                            alertify.alert('<strong>Se aprobó el total del presupuesto estimado de depreciación</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ok-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Confirmación</h4>')
                                .set('label', 'Aceptar')
                                .set('onok', function () {
                                    window.location.href = "{{ path('gestionarPlanesEstimados') }}";
                                });
                        } else {
                            alertify.alert('<strong>' + data + '</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                                .set('label', 'Aceptar')
                        }
                    });
                });

            });

            //Fin de las funciones del presupuesto de Depreciación

            //Funciones para gestionar el presupuesto de Bonificación

            function cargarTotalBonificacion(presupuesto, colorSeleccionado) {

                $('#totalBonificacion').val(presupuesto);
                $('.AsignarBonificacion').prop("disabled", true);
                $('.ModificarBonificacion').prop("disabled", false);
                $('.AprobarBonificacion').prop("disabled", false);

            }

            function graficoTotalBonificacion() {
                var valorMax = totalEstimadoBonificacion.length - 1;
                var valorScrollbar = false;
                if (totalEstimadoBonificacion.length > 6) {
                    valorMax = 5;
                    valorScrollbar = true;
                }
                Highcharts.chart('graficoBonificacionYear', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: 'DISTRIBUCIÓN DEL PRESUPUESTO'
                    },
                    exporting: {
                        enabled: false
                    },
                    scrollbar: {
                        enabled: valorScrollbar,
                        liveRedraw: true,
                        step: 1
                    },
                    xAxis: {
                        type: 'category',
                        min: 0,
                        max: valorMax,
                        useHTML: true
                    },
                    yAxis: {
                        title: {
                            text: 'Presupuesto Estimado',
                            useHTML: true
                        }

                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            borderWidth: 0,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            getExtremesFromAll: true,
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return Highcharts.numberFormat(this.y, 0, ',', '.');
                                }
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                        pointFormat: '<span style="color:{point.color}">{point.name}</span>' + ' presupuesto asignado ' + '<b>{point.y:,.0f}</b>'
                    },

                    "series": [
                        {
                            "name": "Años",
                            "colorByPoint": true,
                            "data": totalEstimadoBonificacion,
                            events: {
                                click: function (oEvent) {
                                    cargarTotalBonificacion(oEvent.point.y, oEvent.point.color);
                                }
                            }
                        }
                    ],
                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 800
                            },
                            chartOptions: {
                                scrollbar: {
                                    enabled: true
                                },
                                xAxis: {
                                    min: 0,
                                    max: 1,
                                    useHTML: true
                                }
                            }
                        }]
                    }
                });
            }

            $('.AsignarBonificacion').on('click', function () {

                //Validaciones
                if ($("#totalBonificacion").val() === '') {
                    alertify.alert('<strong>El total de presupuesto es obligatorio, no puede quedar en blanco.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                //Validaciones
                if ($("#totalBonificacion").val() === '0') {
                    alertify.alert('<strong>El total de presupuesto debe ser mayor que 0.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                $(".preload").removeClass('hidden');

                var mat_datos = {
                    presupuesto: $("#totalBonificacion").val(),
                    idPlanEstimado: {{ app.session.get('idPlanEstimado') }}
                };
                $.ajax({
                    type: "POST",
                    dataType: "html",
                    url: '{{ path("insertTotalBonificacion") }}',
                    data: mat_datos
                }).done(function (data) {

                    $(".preload").addClass('hidden');
                    if (data === 'ok') {

                        alertify.alert('<strong>Se asignó el presupuesto estimado de bonificación correctamente</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ok-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Confirmación</h4>')
                            .set('label', 'Aceptar')
                            .set('onok', function () {
                                window.location.href = "{{ path('gestionarPlanesEstimados') }}";
                            });
                    } else {
                        alertify.alert('<strong>' + data + '</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                            .set('label', 'Aceptar')
                    }
                });

            });

            $('.ModificarBonificacion').on('click', function () {

                //Validaciones
                if ($("#totalBonificacion").val() === '') {
                    alertify.alert('<strong>El total de presupuesto es obligatorio, no puede quedar en blanco.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                //Validaciones
                if ($("#totalBonificacion").val() === '0') {
                    alertify.alert('<strong>El total de presupuesto debe ser mayor que 0.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                $(".preload").removeClass('hidden');

                var mat_datos = {
                    presupuesto: $("#totalBonificacion").val(),
                    idPlanEstimado: {{ app.session.get('idPlanEstimado') }}
                };
                $.ajax({
                    type: "POST",
                    dataType: "html",
                    url: '{{ path("updateTotalBonificacion") }}',
                    data: mat_datos
                }).done(function (data) {

                    $(".preload").addClass('hidden');
                    if (data === 'ok') {

                        alertify.alert('<strong>Se modificó el total del presupuesto estimado de bonificación</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ok-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Confirmación</h4>')
                            .set('label', 'Aceptar')
                            .set('onok', function () {
                                window.location.href = "{{ path('gestionarPlanesEstimados') }}";
                            });
                    } else {
                        alertify.alert('<strong>' + data + '</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                            .set('label', 'Aceptar')
                    }
                });

            });

            $('.AprobarBonificacion').on('click', function () {

                alertify.confirm('Basic: false').set('message', '<strong>Seguro que desea aprobar el total del presupuesto estimado de Bonificación</strong>').set('onok', function () {

                    $(".preload").removeClass('hidden');

                    var mat_datos = {
                        idPlanEstimado: {{ app.session.get('idPlanEstimado') }}
                    };
                    $.ajax({
                        type: "POST",
                        dataType: "html",
                        url: '{{ path("aprobarTotalBonificacion") }}',
                        data: mat_datos
                    }).done(function (data) {

                        $(".preload").addClass('hidden');
                        if (data === 'ok') {

                            alertify.alert('<strong>Se aprobó el total del presupuesto estimado de bonificación</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ok-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Confirmación</h4>')
                                .set('label', 'Aceptar')
                                .set('onok', function () {
                                    window.location.href = "{{ path('gestionarPlanesEstimados') }}";
                                });
                        } else {
                            alertify.alert('<strong>' + data + '</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                                .set('label', 'Aceptar')
                        }
                    });
                });

            });

            //Fin de las funciones del presupuesto de Bonificación

            //Funciones para gestionar el presupuesto de Gastos de comedor

            function cargarTotalComedor(presupuesto, colorSeleccionado) {

                $('#totalComedor').val(presupuesto);
                $('.AsignarComedor').prop("disabled", true);
                $('.ModificarComedor').prop("disabled", false);
                $('.AprobarComedor').prop("disabled", false);

            }

            function graficoTotalComedor() {
                var valorMax = totalEstimadoComedor.length - 1;
                var valorScrollbar = false;
                if (totalEstimadoComedor.length > 6) {
                    valorMax = 5;
                    valorScrollbar = true;
                }
                Highcharts.chart('graficoComedorYear', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: 'DISTRIBUCIÓN DEL PRESUPUESTO'
                    },
                    exporting: {
                        enabled: false
                    },
                    scrollbar: {
                        enabled: valorScrollbar,
                        liveRedraw: true,
                        step: 1
                    },
                    xAxis: {
                        type: 'category',
                        min: 0,
                        max: valorMax,
                        useHTML: true
                    },
                    yAxis: {
                        title: {
                            text: 'Presupuesto Estimado',
                            useHTML: true
                        }

                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            borderWidth: 0,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            getExtremesFromAll: true,
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return Highcharts.numberFormat(this.y, 0, ',', '.');
                                }
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                        pointFormat: '<span style="color:{point.color}">{point.name}</span>' + ' presupuesto asignado ' + '<b>{point.y:,.0f}</b>'
                    },

                    "series": [
                        {
                            "name": "Años",
                            "colorByPoint": true,
                            "data": totalEstimadoComedor,
                            events: {
                                click: function (oEvent) {
                                    cargarTotalComedor(oEvent.point.y, oEvent.point.color);
                                }
                            }
                        }
                    ],
                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 800
                            },
                            chartOptions: {
                                scrollbar: {
                                    enabled: true
                                },
                                xAxis: {
                                    min: 0,
                                    max: 1,
                                    useHTML: true
                                }
                            }
                        }]
                    }
                });
            }

            $('.AsignarComedor').on('click', function () {

                //Validaciones
                if ($("#totalComedor").val() === '') {
                    alertify.alert('<strong>El total de presupuesto es obligatorio, no puede quedar en blanco.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                //Validaciones
                if ($("#totalComedor").val() === '0') {
                    alertify.alert('<strong>El total de presupuesto debe ser mayor que 0.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                $(".preload").removeClass('hidden');

                var mat_datos = {
                    presupuesto: $("#totalComedor").val(),
                    idPlanEstimado: {{ app.session.get('idPlanEstimado') }}
                };
                $.ajax({
                    type: "POST",
                    dataType: "html",
                    url: '{{ path("insertTotalComedor") }}',
                    data: mat_datos
                }).done(function (data) {

                    $(".preload").addClass('hidden');
                    if (data === 'ok') {

                        alertify.alert('<strong>Se asignó el presupuesto de gastos de comedor correctamente</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ok-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Confirmación</h4>')
                            .set('label', 'Aceptar')
                            .set('onok', function () {
                                window.location.href = "{{ path('gestionarPlanesEstimados') }}";
                            });
                    } else {
                        alertify.alert('<strong>' + data + '</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                            .set('label', 'Aceptar')
                    }
                });

            });

            $('.ModificarComedor').on('click', function () {

                //Validaciones
                if ($("#totalComedor").val() === '') {
                    alertify.alert('<strong>El total de presupuesto es obligatorio, no puede quedar en blanco.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                //Validaciones
                if ($("#totalComedor").val() === '0') {
                    alertify.alert('<strong>El total de presupuesto debe ser mayor que 0.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                $(".preload").removeClass('hidden');

                var mat_datos = {
                    presupuesto: $("#totalComedor").val(),
                    idPlanEstimado: {{ app.session.get('idPlanEstimado') }}
                };
                $.ajax({
                    type: "POST",
                    dataType: "html",
                    url: '{{ path("updateTotalComedor") }}',
                    data: mat_datos
                }).done(function (data) {

                    $(".preload").addClass('hidden');
                    if (data === 'ok') {

                        alertify.alert('<strong>Se modificó el total del presupuesto estimado de gastos de comedor</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ok-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Confirmación</h4>')
                            .set('label', 'Aceptar')
                            .set('onok', function () {
                                window.location.href = "{{ path('gestionarPlanesEstimados') }}";
                            });
                    } else {
                        alertify.alert('<strong>' + data + '</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                            .set('label', 'Aceptar')
                    }
                });

            });

            $('.AprobarComedor').on('click', function () {

                alertify.confirm('Basic: false').set('message', '<strong>Seguro que desea aprobar el total del presupuesto de gastos de comedor</strong>').set('onok', function () {

                    $(".preload").removeClass('hidden');

                    var mat_datos = {
                        idPlanEstimado: {{ app.session.get('idPlanEstimado') }}
                    };
                    $.ajax({
                        type: "POST",
                        dataType: "html",
                        url: '{{ path("aprobarTotalComedor") }}',
                        data: mat_datos
                    }).done(function (data) {

                        $(".preload").addClass('hidden');
                        if (data === 'ok') {

                            alertify.alert('<strong>Se aprobó el total del presupuesto estimado de gastos de comedor</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ok-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Confirmación</h4>')
                                .set('label', 'Aceptar')
                                .set('onok', function () {
                                    window.location.href = "{{ path('gestionarPlanesEstimados') }}";
                                });
                        } else {
                            alertify.alert('<strong>' + data + '</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                                .set('label', 'Aceptar')
                        }
                    });
                });

            });

            //Fin de las funciones del presupuesto de Gastos de comedor

            //Funciones para gestionar el presupuesto de Amortización

            function cargarTotalAmortizacion(presupuesto, colorSeleccionado) {

                $('#totalAmortizacion').val(presupuesto);
                $('.AsignarAmortizacion').prop("disabled", true);
                $('.ModificarAmortizacion').prop("disabled", false);
                $('.AprobarAmortizacion').prop("disabled", false);

            }

            function graficoTotalAmortizacion() {
                var valorMax = totalEstimadoAmortizacion.length - 1;
                var valorScrollbar = false;
                if (totalEstimadoAmortizacion.length > 6) {
                    valorMax = 5;
                    valorScrollbar = true;
                }
                Highcharts.chart('graficoAmortizacionYear', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: 'DISTRIBUCIÓN DEL PRESUPUESTO'
                    },
                    exporting: {
                        enabled: false
                    },
                    scrollbar: {
                        enabled: valorScrollbar,
                        liveRedraw: true,
                        step: 1
                    },
                    xAxis: {
                        type: 'category',
                        min: 0,
                        max: valorMax,
                        useHTML: true
                    },
                    yAxis: {
                        title: {
                            text: 'Presupuesto Estimado',
                            useHTML: true
                        }

                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            borderWidth: 0,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            getExtremesFromAll: true,
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return Highcharts.numberFormat(this.y, 0, ',', '.');
                                }
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                        pointFormat: '<span style="color:{point.color}">{point.name}</span>' + ' presupuesto asignado ' + '<b>{point.y:,.0f}</b>'
                    },

                    "series": [
                        {
                            "name": "Años",
                            "colorByPoint": true,
                            "data": totalEstimadoAmortizacion,
                            events: {
                                click: function (oEvent) {
                                    cargarTotalAmortizacion(oEvent.point.y, oEvent.point.color);
                                }
                            }
                        }
                    ],
                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 800
                            },
                            chartOptions: {
                                scrollbar: {
                                    enabled: true
                                },
                                xAxis: {
                                    min: 0,
                                    max: 1,
                                    useHTML: true
                                }
                            }
                        }]
                    }
                });
            }

            $('.AsignarAmortizacion').on('click', function () {

                //Validaciones
                if ($("#totalAmortizacion").val() === '') {
                    alertify.alert('<strong>El total de presupuesto es obligatorio, no puede quedar en blanco.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                //Validaciones
                if ($("#totalAmortizacion").val() === '0') {
                    alertify.alert('<strong>El total de presupuesto debe ser mayor que 0.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                $(".preload").removeClass('hidden');

                var mat_datos = {
                    presupuesto: $("#totalAmortizacion").val(),
                    idPlanEstimado: {{ app.session.get('idPlanEstimado') }}
                };
                $.ajax({
                    type: "POST",
                    dataType: "html",
                    url: '{{ path("insertTotalAmortizacion") }}',
                    data: mat_datos
                }).done(function (data) {

                    $(".preload").addClass('hidden');
                    if (data === 'ok') {

                        alertify.alert('<strong>Se asignó el presupuesto estimado de amortización correctamente</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ok-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Confirmación</h4>')
                            .set('label', 'Aceptar')
                            .set('onok', function () {
                                window.location.href = "{{ path('gestionarPlanesEstimados') }}";
                            });
                    } else {
                        alertify.alert('<strong>' + data + '</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                            .set('label', 'Aceptar')
                    }
                });

            });

            $('.ModificarAmortizacion').on('click', function () {

                //Validaciones
                if ($("#totalAmortizacion").val() === '') {
                    alertify.alert('<strong>El total de presupuesto es obligatorio, no puede quedar en blanco.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                //Validaciones
                if ($("#totalAmortizacion").val() === '0') {
                    alertify.alert('<strong>El total de presupuesto debe ser mayor que 0.</strong>')
                        .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                            '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                        .set('label', 'Aceptar');
                    return false;
                }

                $(".preload").removeClass('hidden');

                var mat_datos = {
                    presupuesto: $("#totalAmortizacion").val(),
                    idPlanEstimado: {{ app.session.get('idPlanEstimado') }}
                };
                $.ajax({
                    type: "POST",
                    dataType: "html",
                    url: '{{ path("updateTotalAmortizacion") }}',
                    data: mat_datos
                }).done(function (data) {

                    $(".preload").addClass('hidden');
                    if (data === 'ok') {

                        alertify.alert('<strong>Se modificó el total del presupuesto estimado de amortización</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ok-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Confirmación</h4>')
                            .set('label', 'Aceptar')
                            .set('onok', function () {
                                window.location.href = "{{ path('gestionarPlanesEstimados') }}";
                            });
                    } else {
                        alertify.alert('<strong>' + data + '</strong>')
                            .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                            .set('label', 'Aceptar')
                    }
                });

            });

            $('.AprobarAmortizacion').on('click', function () {

                alertify.confirm('Basic: false').set('message', '<strong>Seguro que desea aprobar el total del presupuesto estimado de amortización</strong>').set('onok', function () {

                    $(".preload").removeClass('hidden');

                    var mat_datos = {
                        idPlanEstimado: {{ app.session.get('idPlanEstimado') }}
                    };
                    $.ajax({
                        type: "POST",
                        dataType: "html",
                        url: '{{ path("aprobarTotalAmortizacion") }}',
                        data: mat_datos
                    }).done(function (data) {

                        $(".preload").addClass('hidden');
                        if (data === 'ok') {

                            alertify.alert('<strong>Se aprobó el total del presupuesto estimado de amortización</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ok-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Confirmación</h4>')
                                .set('label', 'Aceptar')
                                .set('onok', function () {
                                    window.location.href = "{{ path('gestionarPlanesEstimados') }}";
                                });
                        } else {
                            alertify.alert('<strong>' + data + '</strong>')
                                .setHeader('<span class="glyphicon glyphicon-ban-circle" style="font-size: 20px"></span>' +
                                    '<h4 class="modal-title" style="display: inline-block; margin-left: 10px">Error</h4>')
                                .set('label', 'Aceptar')
                        }
                    });
                });

            });

            //Fin de las funciones del presupuesto de Amortización

        });
    </script>
{% endblock %}